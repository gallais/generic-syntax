<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Induction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- An abstraction of various forms of recursion/induction</a>
<a id="164" class="Comment">------------------------------------------------------------------------</a>

<a id="238" class="Comment">-- The idea underlying Induction.* comes from Epigram 1, see Section 4</a>
<a id="309" class="Comment">-- of &quot;The view from the left&quot; by McBride and McKinna.</a>

<a id="365" class="Comment">-- Note: The types in this module can perhaps be easier to understand</a>
<a id="435" class="Comment">-- if they are normalised. Note also that Agda can do the</a>
<a id="493" class="Comment">-- normalisation for you.</a>

<a id="520" class="Symbol">{-#</a> <a id="524" class="Keyword">OPTIONS</a> <a id="532" class="Pragma">--without-K</a> <a id="544" class="Pragma">--safe</a> <a id="551" class="Symbol">#-}</a>

<a id="556" class="Keyword">module</a> <a id="563" href="Induction.html" class="Module">Induction</a> <a id="573" class="Keyword">where</a>

<a id="580" class="Keyword">open</a> <a id="585" class="Keyword">import</a> <a id="592" href="Level.html" class="Module">Level</a>
<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="626" class="Comment">-- A RecStruct describes the allowed structure of recursion. The</a>
<a id="691" class="Comment">-- examples in Induction.Nat should explain what this is all about.</a>

<a id="RecStruct"></a><a id="760" href="Induction.html#760" class="Function">RecStruct</a> <a id="770" class="Symbol">:</a> <a id="772" class="Symbol">∀</a> <a id="774" class="Symbol">{</a><a id="775" href="Induction.html#775" class="Bound">a</a><a id="776" class="Symbol">}</a> <a id="778" class="Symbol">→</a> <a id="780" class="PrimitiveType">Set</a> <a id="784" href="Induction.html#775" class="Bound">a</a> <a id="786" class="Symbol">→</a> <a id="788" class="Symbol">(</a><a id="789" href="Induction.html#789" class="Bound">ℓ₁</a> <a id="792" href="Induction.html#792" class="Bound">ℓ₂</a> <a id="795" class="Symbol">:</a> <a id="797" href="Agda.Primitive.html#423" class="Postulate">Level</a><a id="802" class="Symbol">)</a> <a id="804" class="Symbol">→</a> <a id="806" class="PrimitiveType">Set</a> <a id="810" class="Symbol">_</a>
<a id="812" href="Induction.html#760" class="Function">RecStruct</a> <a id="822" href="Induction.html#822" class="Bound">A</a> <a id="824" href="Induction.html#824" class="Bound">ℓ₁</a> <a id="827" href="Induction.html#827" class="Bound">ℓ₂</a> <a id="830" class="Symbol">=</a> <a id="832" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="837" href="Induction.html#822" class="Bound">A</a> <a id="839" href="Induction.html#824" class="Bound">ℓ₁</a> <a id="842" class="Symbol">→</a> <a id="844" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="849" href="Induction.html#822" class="Bound">A</a> <a id="851" href="Induction.html#827" class="Bound">ℓ₂</a>

<a id="855" class="Comment">-- A recursor builder constructs an instance of a recursion structure</a>
<a id="925" class="Comment">-- for a given input.</a>

<a id="RecursorBuilder"></a><a id="948" href="Induction.html#948" class="Function">RecursorBuilder</a> <a id="964" class="Symbol">:</a> <a id="966" class="Symbol">∀</a> <a id="968" class="Symbol">{</a><a id="969" href="Induction.html#969" class="Bound">a</a> <a id="971" href="Induction.html#971" class="Bound">ℓ₁</a> <a id="974" href="Induction.html#974" class="Bound">ℓ₂</a><a id="976" class="Symbol">}</a> <a id="978" class="Symbol">{</a><a id="979" href="Induction.html#979" class="Bound">A</a> <a id="981" class="Symbol">:</a> <a id="983" class="PrimitiveType">Set</a> <a id="987" href="Induction.html#969" class="Bound">a</a><a id="988" class="Symbol">}</a> <a id="990" class="Symbol">→</a> <a id="992" href="Induction.html#760" class="Function">RecStruct</a> <a id="1002" href="Induction.html#979" class="Bound">A</a> <a id="1004" href="Induction.html#971" class="Bound">ℓ₁</a> <a id="1007" href="Induction.html#974" class="Bound">ℓ₂</a> <a id="1010" class="Symbol">→</a> <a id="1012" class="PrimitiveType">Set</a> <a id="1016" class="Symbol">_</a>
<a id="1018" href="Induction.html#948" class="Function">RecursorBuilder</a> <a id="1034" href="Induction.html#1034" class="Bound">Rec</a> <a id="1038" class="Symbol">=</a> <a id="1040" class="Symbol">∀</a> <a id="1042" href="Induction.html#1042" class="Bound">P</a> <a id="1044" class="Symbol">→</a> <a id="1046" href="Induction.html#1034" class="Bound">Rec</a> <a id="1050" href="Induction.html#1042" class="Bound">P</a> <a id="1052" href="Relation.Unary.html#2336" class="Function Operator">⊆′</a> <a id="1055" href="Induction.html#1042" class="Bound">P</a> <a id="1057" class="Symbol">→</a> <a id="1059" href="Relation.Unary.html#3221" class="Function">Universal</a> <a id="1069" class="Symbol">(</a><a id="1070" href="Induction.html#1034" class="Bound">Rec</a> <a id="1074" href="Induction.html#1042" class="Bound">P</a><a id="1075" class="Symbol">)</a>

<a id="1078" class="Comment">-- A recursor can be used to actually compute/prove something useful.</a>

<a id="Recursor"></a><a id="1149" href="Induction.html#1149" class="Function">Recursor</a> <a id="1158" class="Symbol">:</a> <a id="1160" class="Symbol">∀</a> <a id="1162" class="Symbol">{</a><a id="1163" href="Induction.html#1163" class="Bound">a</a> <a id="1165" href="Induction.html#1165" class="Bound">ℓ₁</a> <a id="1168" href="Induction.html#1168" class="Bound">ℓ₂</a><a id="1170" class="Symbol">}</a> <a id="1172" class="Symbol">{</a><a id="1173" href="Induction.html#1173" class="Bound">A</a> <a id="1175" class="Symbol">:</a> <a id="1177" class="PrimitiveType">Set</a> <a id="1181" href="Induction.html#1163" class="Bound">a</a><a id="1182" class="Symbol">}</a> <a id="1184" class="Symbol">→</a> <a id="1186" href="Induction.html#760" class="Function">RecStruct</a> <a id="1196" href="Induction.html#1173" class="Bound">A</a> <a id="1198" href="Induction.html#1165" class="Bound">ℓ₁</a> <a id="1201" href="Induction.html#1168" class="Bound">ℓ₂</a> <a id="1204" class="Symbol">→</a> <a id="1206" class="PrimitiveType">Set</a> <a id="1210" class="Symbol">_</a>
<a id="1212" href="Induction.html#1149" class="Function">Recursor</a> <a id="1221" href="Induction.html#1221" class="Bound">Rec</a> <a id="1225" class="Symbol">=</a> <a id="1227" class="Symbol">∀</a> <a id="1229" href="Induction.html#1229" class="Bound">P</a> <a id="1231" class="Symbol">→</a> <a id="1233" href="Induction.html#1221" class="Bound">Rec</a> <a id="1237" href="Induction.html#1229" class="Bound">P</a> <a id="1239" href="Relation.Unary.html#2336" class="Function Operator">⊆′</a> <a id="1242" href="Induction.html#1229" class="Bound">P</a> <a id="1244" class="Symbol">→</a> <a id="1246" href="Relation.Unary.html#3221" class="Function">Universal</a> <a id="1256" href="Induction.html#1229" class="Bound">P</a>

<a id="1259" class="Comment">-- And recursors can be constructed from recursor builders.</a>

<a id="build"></a><a id="1320" href="Induction.html#1320" class="Function">build</a> <a id="1326" class="Symbol">:</a> <a id="1328" class="Symbol">∀</a> <a id="1330" class="Symbol">{</a><a id="1331" href="Induction.html#1331" class="Bound">a</a> <a id="1333" href="Induction.html#1333" class="Bound">ℓ₁</a> <a id="1336" href="Induction.html#1336" class="Bound">ℓ₂</a><a id="1338" class="Symbol">}</a> <a id="1340" class="Symbol">{</a><a id="1341" href="Induction.html#1341" class="Bound">A</a> <a id="1343" class="Symbol">:</a> <a id="1345" class="PrimitiveType">Set</a> <a id="1349" href="Induction.html#1331" class="Bound">a</a><a id="1350" class="Symbol">}</a> <a id="1352" class="Symbol">{</a><a id="1353" href="Induction.html#1353" class="Bound">Rec</a> <a id="1357" class="Symbol">:</a> <a id="1359" href="Induction.html#760" class="Function">RecStruct</a> <a id="1369" href="Induction.html#1341" class="Bound">A</a> <a id="1371" href="Induction.html#1333" class="Bound">ℓ₁</a> <a id="1374" href="Induction.html#1336" class="Bound">ℓ₂</a><a id="1376" class="Symbol">}</a> <a id="1378" class="Symbol">→</a>
        <a id="1388" href="Induction.html#948" class="Function">RecursorBuilder</a> <a id="1404" href="Induction.html#1353" class="Bound">Rec</a> <a id="1408" class="Symbol">→</a>
        <a id="1418" href="Induction.html#1149" class="Function">Recursor</a> <a id="1427" href="Induction.html#1353" class="Bound">Rec</a>
<a id="1431" href="Induction.html#1320" class="Function">build</a> <a id="1437" href="Induction.html#1437" class="Bound">builder</a> <a id="1445" href="Induction.html#1445" class="Bound">P</a> <a id="1447" href="Induction.html#1447" class="Bound">f</a> <a id="1449" href="Induction.html#1449" class="Bound">x</a> <a id="1451" class="Symbol">=</a> <a id="1453" href="Induction.html#1447" class="Bound">f</a> <a id="1455" href="Induction.html#1449" class="Bound">x</a> <a id="1457" class="Symbol">(</a><a id="1458" href="Induction.html#1437" class="Bound">builder</a> <a id="1466" href="Induction.html#1445" class="Bound">P</a> <a id="1468" href="Induction.html#1447" class="Bound">f</a> <a id="1470" href="Induction.html#1449" class="Bound">x</a><a id="1471" class="Symbol">)</a>

<a id="1474" class="Comment">-- We can repeat the exercise above for subsets of the type we are</a>
<a id="1541" class="Comment">-- recursing over.</a>

<a id="SubsetRecursorBuilder"></a><a id="1561" href="Induction.html#1561" class="Function">SubsetRecursorBuilder</a> <a id="1583" class="Symbol">:</a> <a id="1585" class="Symbol">∀</a> <a id="1587" class="Symbol">{</a><a id="1588" href="Induction.html#1588" class="Bound">a</a> <a id="1590" href="Induction.html#1590" class="Bound">ℓ₁</a> <a id="1593" href="Induction.html#1593" class="Bound">ℓ₂</a> <a id="1596" href="Induction.html#1596" class="Bound">ℓ₃</a><a id="1598" class="Symbol">}</a> <a id="1600" class="Symbol">{</a><a id="1601" href="Induction.html#1601" class="Bound">A</a> <a id="1603" class="Symbol">:</a> <a id="1605" class="PrimitiveType">Set</a> <a id="1609" href="Induction.html#1588" class="Bound">a</a><a id="1610" class="Symbol">}</a> <a id="1612" class="Symbol">→</a>
                        <a id="1638" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="1643" href="Induction.html#1601" class="Bound">A</a> <a id="1645" href="Induction.html#1590" class="Bound">ℓ₁</a> <a id="1648" class="Symbol">→</a> <a id="1650" href="Induction.html#760" class="Function">RecStruct</a> <a id="1660" href="Induction.html#1601" class="Bound">A</a> <a id="1662" href="Induction.html#1593" class="Bound">ℓ₂</a> <a id="1665" href="Induction.html#1596" class="Bound">ℓ₃</a> <a id="1668" class="Symbol">→</a> <a id="1670" class="PrimitiveType">Set</a> <a id="1674" class="Symbol">_</a>
<a id="1676" href="Induction.html#1561" class="Function">SubsetRecursorBuilder</a> <a id="1698" href="Induction.html#1698" class="Bound">Q</a> <a id="1700" href="Induction.html#1700" class="Bound">Rec</a> <a id="1704" class="Symbol">=</a> <a id="1706" class="Symbol">∀</a> <a id="1708" href="Induction.html#1708" class="Bound">P</a> <a id="1710" class="Symbol">→</a> <a id="1712" href="Induction.html#1700" class="Bound">Rec</a> <a id="1716" href="Induction.html#1708" class="Bound">P</a> <a id="1718" href="Relation.Unary.html#2336" class="Function Operator">⊆′</a> <a id="1721" href="Induction.html#1708" class="Bound">P</a> <a id="1723" class="Symbol">→</a> <a id="1725" href="Induction.html#1698" class="Bound">Q</a> <a id="1727" href="Relation.Unary.html#2336" class="Function Operator">⊆′</a> <a id="1730" href="Induction.html#1700" class="Bound">Rec</a> <a id="1734" href="Induction.html#1708" class="Bound">P</a>

<a id="SubsetRecursor"></a><a id="1737" href="Induction.html#1737" class="Function">SubsetRecursor</a> <a id="1752" class="Symbol">:</a> <a id="1754" class="Symbol">∀</a> <a id="1756" class="Symbol">{</a><a id="1757" href="Induction.html#1757" class="Bound">a</a> <a id="1759" href="Induction.html#1759" class="Bound">ℓ₁</a> <a id="1762" href="Induction.html#1762" class="Bound">ℓ₂</a> <a id="1765" href="Induction.html#1765" class="Bound">ℓ₃</a><a id="1767" class="Symbol">}</a> <a id="1769" class="Symbol">{</a><a id="1770" href="Induction.html#1770" class="Bound">A</a> <a id="1772" class="Symbol">:</a> <a id="1774" class="PrimitiveType">Set</a> <a id="1778" href="Induction.html#1757" class="Bound">a</a><a id="1779" class="Symbol">}</a> <a id="1781" class="Symbol">→</a>
                 <a id="1800" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="1805" href="Induction.html#1770" class="Bound">A</a> <a id="1807" href="Induction.html#1759" class="Bound">ℓ₁</a> <a id="1810" class="Symbol">→</a> <a id="1812" href="Induction.html#760" class="Function">RecStruct</a> <a id="1822" href="Induction.html#1770" class="Bound">A</a> <a id="1824" href="Induction.html#1762" class="Bound">ℓ₂</a> <a id="1827" href="Induction.html#1765" class="Bound">ℓ₃</a> <a id="1830" class="Symbol">→</a> <a id="1832" class="PrimitiveType">Set</a> <a id="1836" class="Symbol">_</a>
<a id="1838" href="Induction.html#1737" class="Function">SubsetRecursor</a> <a id="1853" href="Induction.html#1853" class="Bound">Q</a> <a id="1855" href="Induction.html#1855" class="Bound">Rec</a> <a id="1859" class="Symbol">=</a> <a id="1861" class="Symbol">∀</a> <a id="1863" href="Induction.html#1863" class="Bound">P</a> <a id="1865" class="Symbol">→</a> <a id="1867" href="Induction.html#1855" class="Bound">Rec</a> <a id="1871" href="Induction.html#1863" class="Bound">P</a> <a id="1873" href="Relation.Unary.html#2336" class="Function Operator">⊆′</a> <a id="1876" href="Induction.html#1863" class="Bound">P</a> <a id="1878" class="Symbol">→</a> <a id="1880" href="Induction.html#1853" class="Bound">Q</a> <a id="1882" href="Relation.Unary.html#2336" class="Function Operator">⊆′</a> <a id="1885" href="Induction.html#1863" class="Bound">P</a>

<a id="subsetBuild"></a><a id="1888" href="Induction.html#1888" class="Function">subsetBuild</a> <a id="1900" class="Symbol">:</a> <a id="1902" class="Symbol">∀</a> <a id="1904" class="Symbol">{</a><a id="1905" href="Induction.html#1905" class="Bound">a</a> <a id="1907" href="Induction.html#1907" class="Bound">ℓ₁</a> <a id="1910" href="Induction.html#1910" class="Bound">ℓ₂</a> <a id="1913" href="Induction.html#1913" class="Bound">ℓ₃</a><a id="1915" class="Symbol">}</a>
                <a id="1933" class="Symbol">{</a><a id="1934" href="Induction.html#1934" class="Bound">A</a> <a id="1936" class="Symbol">:</a> <a id="1938" class="PrimitiveType">Set</a> <a id="1942" href="Induction.html#1905" class="Bound">a</a><a id="1943" class="Symbol">}</a> <a id="1945" class="Symbol">{</a><a id="1946" href="Induction.html#1946" class="Bound">Q</a> <a id="1948" class="Symbol">:</a> <a id="1950" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="1955" href="Induction.html#1934" class="Bound">A</a> <a id="1957" href="Induction.html#1907" class="Bound">ℓ₁</a><a id="1959" class="Symbol">}</a> <a id="1961" class="Symbol">{</a><a id="1962" href="Induction.html#1962" class="Bound">Rec</a> <a id="1966" class="Symbol">:</a> <a id="1968" href="Induction.html#760" class="Function">RecStruct</a> <a id="1978" href="Induction.html#1934" class="Bound">A</a> <a id="1980" href="Induction.html#1910" class="Bound">ℓ₂</a> <a id="1983" href="Induction.html#1913" class="Bound">ℓ₃</a><a id="1985" class="Symbol">}</a> <a id="1987" class="Symbol">→</a>
                <a id="2005" href="Induction.html#1561" class="Function">SubsetRecursorBuilder</a> <a id="2027" href="Induction.html#1946" class="Bound">Q</a> <a id="2029" href="Induction.html#1962" class="Bound">Rec</a> <a id="2033" class="Symbol">→</a>
                <a id="2051" href="Induction.html#1737" class="Function">SubsetRecursor</a> <a id="2066" href="Induction.html#1946" class="Bound">Q</a> <a id="2068" href="Induction.html#1962" class="Bound">Rec</a>
<a id="2072" href="Induction.html#1888" class="Function">subsetBuild</a> <a id="2084" href="Induction.html#2084" class="Bound">builder</a> <a id="2092" href="Induction.html#2092" class="Bound">P</a> <a id="2094" href="Induction.html#2094" class="Bound">f</a> <a id="2096" href="Induction.html#2096" class="Bound">x</a> <a id="2098" href="Induction.html#2098" class="Bound">q</a> <a id="2100" class="Symbol">=</a> <a id="2102" href="Induction.html#2094" class="Bound">f</a> <a id="2104" href="Induction.html#2096" class="Bound">x</a> <a id="2106" class="Symbol">(</a><a id="2107" href="Induction.html#2084" class="Bound">builder</a> <a id="2115" href="Induction.html#2092" class="Bound">P</a> <a id="2117" href="Induction.html#2094" class="Bound">f</a> <a id="2119" href="Induction.html#2096" class="Bound">x</a> <a id="2121" href="Induction.html#2098" class="Bound">q</a><a id="2122" class="Symbol">)</a>
</pre></body></html>