<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Semantics.Elaboration.LetBinder</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">module</a> <a id="8" href="Generic.Semantics.Elaboration.LetBinder.html" class="Module">Generic.Semantics.Elaboration.LetBinder</a> <a id="48" class="Keyword">where</a>

<a id="55" class="Keyword">open</a> <a id="60" class="Keyword">import</a> <a id="67" href="Size.html" class="Module">Size</a>
<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Data.Product.html" class="Module">Data.Product</a>
<a id="97" class="Keyword">open</a> <a id="102" class="Keyword">import</a> <a id="109" href="Agda.Builtin.List.html" class="Module">Agda.Builtin.List</a>
<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Function.html" class="Module">Function</a>

<a id="149" class="Keyword">open</a> <a id="154" class="Keyword">import</a> <a id="161" href="indexed.html" class="Module">indexed</a>
<a id="169" class="Keyword">open</a> <a id="174" class="Keyword">import</a> <a id="181" href="environment.html" class="Module">environment</a>
<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Generic.Syntax.html" class="Module">Generic.Syntax</a>
<a id="220" class="Keyword">open</a> <a id="225" class="Keyword">import</a> <a id="232" href="Generic.Syntax.LetBinder.html" class="Module">Generic.Syntax.LetBinder</a>
<a id="257" class="Keyword">open</a> <a id="262" class="Keyword">import</a> <a id="269" href="Generic.Semantics.html" class="Module">Generic.Semantics</a>
<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="Generic.Semantics.Syntactic.html" class="Module">Generic.Semantics.Syntactic</a>

<a id="328" class="Comment">-- Elaborating away a single let-binder. The algebra is defined by case analysis</a>
<a id="409" class="Comment">-- over the constructors:</a>

<a id="436" class="Comment">-- * let-binders are inlined thanks to the substitution _[_/0] which takes two</a>
<a id="515" class="Comment">-- arguments t and e and instatiates the first free variable of t with e.</a>

<a id="590" class="Comment">-- * the other constructors are left as is by reusing Substitution&#39;s algebra</a>

<a id="668" class="Keyword">module</a> <a id="675" href="Generic.Semantics.Elaboration.LetBinder.html#675" class="Module">_</a> <a id="677" class="Symbol">{</a><a id="678" href="Generic.Semantics.Elaboration.LetBinder.html#678" class="Bound">I</a> <a id="680" class="Symbol">:</a> <a id="682" class="PrimitiveType">Set</a><a id="685" class="Symbol">}</a> <a id="687" class="Symbol">{</a><a id="688" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="690" class="Symbol">:</a> <a id="692" href="Generic.Syntax.html#381" class="Datatype">Desc</a> <a id="697" href="Generic.Semantics.Elaboration.LetBinder.html#678" class="Bound">I</a><a id="698" class="Symbol">}</a> <a id="700" class="Keyword">where</a>

  <a id="709" href="Generic.Semantics.Elaboration.LetBinder.html#709" class="Function">UnLet</a> <a id="715" class="Symbol">:</a> <a id="717" href="Generic.Semantics.html#487" class="Record">Sem</a> <a id="721" class="Symbol">(</a><a id="722" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="724" href="Generic.Syntax.html#1632" class="Function Operator">`+</a> <a id="727" href="Generic.Syntax.LetBinder.html#265" class="Function">Let</a><a id="730" class="Symbol">)</a> <a id="732" class="Symbol">(</a><a id="733" href="Generic.Syntax.html#1063" class="Datatype">Tm</a> <a id="736" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="738" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a><a id="739" class="Symbol">)</a> <a id="741" class="Symbol">(</a><a id="742" href="Generic.Syntax.html#1063" class="Datatype">Tm</a> <a id="745" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="747" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a><a id="748" class="Symbol">)</a>
  <a id="752" href="Generic.Semantics.html#552" class="Field">Sem.th^𝓥</a>  <a id="762" href="Generic.Semantics.Elaboration.LetBinder.html#709" class="Function">UnLet</a> <a id="768" class="Symbol">=</a> <a id="770" href="Generic.Semantics.Syntactic.html#647" class="Function">th^Tm</a>
  <a id="778" href="Generic.Semantics.html#595" class="Field">Sem.var</a>    <a id="789" href="Generic.Semantics.Elaboration.LetBinder.html#709" class="Function">UnLet</a> <a id="795" class="Symbol">=</a> <a id="797" href="Function.html#1068" class="Function">id</a>
  <a id="802" href="Generic.Semantics.html#654" class="Field">Sem.alg</a>    <a id="813" href="Generic.Semantics.Elaboration.LetBinder.html#709" class="Function">UnLet</a> <a id="819" class="Symbol">=</a> <a id="821" href="Generic.Syntax.html#1839" class="Function">case</a> <a id="826" class="Symbol">(</a><a id="827" href="Generic.Semantics.html#654" class="Field">Sem.alg</a> <a id="835" href="Generic.Semantics.Syntactic.html#792" class="Function">Substitution</a><a id="847" class="Symbol">)</a> <a id="849" href="Function.html#1891" class="Function Operator">$</a> <a id="851" class="Symbol">λ</a> <a id="853" class="Keyword">where</a>
   <a id="862" class="Symbol">(</a><a id="863" href="Generic.Syntax.LetBinder.html#365" class="InductiveConstructor">`IN&#39;</a> <a id="868" href="Generic.Semantics.Elaboration.LetBinder.html#868" class="Bound">e</a> <a id="870" href="Generic.Semantics.Elaboration.LetBinder.html#870" class="Bound">t</a><a id="871" class="Symbol">)</a> <a id="873" class="Symbol">→</a>  <a id="876" href="environment.html#3203" class="Function">extract</a> <a id="884" href="Generic.Semantics.Elaboration.LetBinder.html#870" class="Bound">t</a> <a id="886" class="Symbol">(</a><a id="887" href="environment.html#515" class="Function">ε</a> <a id="889" href="environment.html#2070" class="Function Operator">∙</a> <a id="891" href="Generic.Semantics.Elaboration.LetBinder.html#868" class="Bound">e</a><a id="892" class="Symbol">)</a>

  <a id="897" href="Generic.Semantics.Elaboration.LetBinder.html#897" class="Function">unLet</a> <a id="903" class="Symbol">:</a> <a id="905" class="Symbol">∀{</a><a id="907" href="Generic.Semantics.Elaboration.LetBinder.html#907" class="Bound">Γ</a> <a id="909" href="Generic.Semantics.Elaboration.LetBinder.html#909" class="Bound">Δ</a> <a id="911" href="Generic.Semantics.Elaboration.LetBinder.html#911" class="Bound">σ</a> <a id="913" href="Generic.Semantics.Elaboration.LetBinder.html#913" class="Bound">s</a><a id="914" class="Symbol">}</a> <a id="916" class="Symbol">→</a> <a id="918" class="Symbol">(</a><a id="919" href="Generic.Semantics.Elaboration.LetBinder.html#907" class="Bound">Γ</a> <a id="921" href="environment.html#309" class="Record Operator">─Env</a><a id="925" class="Symbol">)</a> <a id="927" class="Symbol">(</a><a id="928" href="Generic.Syntax.html#1063" class="Datatype">Tm</a> <a id="931" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="933" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a><a id="934" class="Symbol">)</a> <a id="936" href="Generic.Semantics.Elaboration.LetBinder.html#909" class="Bound">Δ</a> <a id="938" class="Symbol">→</a> <a id="940" href="Generic.Syntax.html#1063" class="Datatype">Tm</a> <a id="943" class="Symbol">(</a><a id="944" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="946" href="Generic.Syntax.html#1632" class="Function Operator">`+</a> <a id="949" href="Generic.Syntax.LetBinder.html#265" class="Function">Let</a><a id="952" class="Symbol">)</a> <a id="954" href="Generic.Semantics.Elaboration.LetBinder.html#913" class="Bound">s</a> <a id="956" href="Generic.Semantics.Elaboration.LetBinder.html#911" class="Bound">σ</a> <a id="958" href="Generic.Semantics.Elaboration.LetBinder.html#907" class="Bound">Γ</a> <a id="960" class="Symbol">→</a> <a id="962" href="Generic.Syntax.html#1063" class="Datatype">Tm</a> <a id="965" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="967" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a> <a id="969" href="Generic.Semantics.Elaboration.LetBinder.html#911" class="Bound">σ</a> <a id="971" href="Generic.Semantics.Elaboration.LetBinder.html#909" class="Bound">Δ</a>
  <a id="975" href="Generic.Semantics.Elaboration.LetBinder.html#897" class="Function">unLet</a> <a id="981" href="Generic.Semantics.Elaboration.LetBinder.html#981" class="Bound">ρ</a> <a id="983" href="Generic.Semantics.Elaboration.LetBinder.html#983" class="Bound">t</a> <a id="985" class="Symbol">=</a> <a id="987" href="Generic.Semantics.html#707" class="Function">Sem.sem</a> <a id="995" href="Generic.Semantics.Elaboration.LetBinder.html#709" class="Function">UnLet</a> <a id="1001" href="Generic.Semantics.Elaboration.LetBinder.html#981" class="Bound">ρ</a> <a id="1003" href="Generic.Semantics.Elaboration.LetBinder.html#983" class="Bound">t</a>

  <a id="1008" href="Generic.Semantics.Elaboration.LetBinder.html#1008" class="Function">unlet</a> <a id="1014" class="Symbol">:</a> <a id="1016" class="Symbol">{</a><a id="1017" href="Generic.Semantics.Elaboration.LetBinder.html#1017" class="Bound">i</a> <a id="1019" class="Symbol">:</a> <a id="1021" href="Generic.Semantics.Elaboration.LetBinder.html#678" class="Bound">I</a><a id="1022" class="Symbol">}</a> <a id="1024" class="Symbol">→</a> <a id="1026" href="indexed.html#903" class="Function Operator">[</a> <a id="1028" href="Generic.Syntax.html#1063" class="Datatype">Tm</a> <a id="1031" class="Symbol">(</a><a id="1032" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="1034" href="Generic.Syntax.html#1632" class="Function Operator">`+</a> <a id="1037" href="Generic.Syntax.LetBinder.html#265" class="Function">Let</a><a id="1040" class="Symbol">)</a> <a id="1042" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a> <a id="1044" href="Generic.Semantics.Elaboration.LetBinder.html#1017" class="Bound">i</a> <a id="1046" href="indexed.html#759" class="Function Operator">⟶</a> <a id="1048" href="Generic.Syntax.html#1063" class="Datatype">Tm</a> <a id="1051" href="Generic.Semantics.Elaboration.LetBinder.html#688" class="Bound">d</a> <a id="1053" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a> <a id="1055" href="Generic.Semantics.Elaboration.LetBinder.html#1017" class="Bound">i</a> <a id="1057" href="indexed.html#903" class="Function Operator">]</a>
  <a id="1061" href="Generic.Semantics.Elaboration.LetBinder.html#1008" class="Function">unlet</a> <a id="1067" class="Symbol">=</a> <a id="1069" href="Generic.Semantics.html#707" class="Function">Sem.sem</a> <a id="1077" href="Generic.Semantics.Elaboration.LetBinder.html#709" class="Function">UnLet</a> <a id="1083" class="Symbol">(</a><a id="1084" href="environment.html#383" class="InductiveConstructor">pack</a> <a id="1089" href="Generic.Syntax.html#1116" class="InductiveConstructor">`var</a><a id="1093" class="Symbol">)</a>

</pre></body></html>