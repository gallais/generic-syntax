<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Syntax.Bidirectional</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">module</a> <a id="8" href="Generic.Syntax.Bidirectional.html" class="Module">Generic.Syntax.Bidirectional</a> <a id="37" class="Keyword">where</a>

<a id="44" class="Keyword">open</a> <a id="49" class="Keyword">import</a> <a id="56" href="Data.Product.html" class="Module">Data.Product</a>
<a id="69" class="Keyword">open</a> <a id="74" class="Keyword">import</a> <a id="81" href="Agda.Builtin.List.html" class="Module">Agda.Builtin.List</a>
<a id="99" class="Keyword">open</a> <a id="104" class="Keyword">import</a> <a id="111" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>
<a id="133" class="Keyword">open</a> <a id="138" class="Keyword">import</a> <a id="145" href="Function.html" class="Module">Function</a>

<a id="155" class="Keyword">open</a> <a id="160" class="Keyword">import</a> <a id="167" href="Generic.Syntax.html" class="Module">Generic.Syntax</a>

<a id="183" class="Keyword">infixr</a> <a id="190" class="Number">5</a> <a id="192" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">_⇒_</a>
<a id="196" class="Keyword">data</a> <a id="Type"></a><a id="201" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="206" class="Symbol">:</a> <a id="208" class="PrimitiveType">Set</a> <a id="212" class="Keyword">where</a>
  <a id="Type.α"></a><a id="220" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a>    <a id="225" class="Symbol">:</a> <a id="227" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a>
  <a id="Type._⇒_"></a><a id="234" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">_⇒_</a>  <a id="239" class="Symbol">:</a> <a id="241" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="246" class="Symbol">→</a> <a id="248" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="253" class="Symbol">→</a> <a id="255" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a>

<a id="261" class="Comment">-- We have an *untyped* language presented in a bidirectional manner</a>
<a id="330" class="Comment">-- where phases are statically checked</a>

<a id="370" class="Keyword">data</a> <a id="`Lang"></a><a id="375" href="Generic.Syntax.Bidirectional.html#375" class="Datatype">`Lang</a> <a id="381" class="Symbol">:</a> <a id="383" class="PrimitiveType">Set</a> <a id="387" class="Keyword">where</a>
  <a id="`Lang.App"></a><a id="395" href="Generic.Syntax.Bidirectional.html#395" class="InductiveConstructor">App</a> <a id="`Lang.Lam"></a><a id="399" href="Generic.Syntax.Bidirectional.html#399" class="InductiveConstructor">Lam</a> <a id="`Lang.Emb"></a><a id="403" href="Generic.Syntax.Bidirectional.html#403" class="InductiveConstructor">Emb</a> <a id="407" class="Symbol">:</a> <a id="409" href="Generic.Syntax.Bidirectional.html#375" class="Datatype">`Lang</a>
  <a id="`Lang.Cut"></a><a id="417" href="Generic.Syntax.Bidirectional.html#417" class="InductiveConstructor">Cut</a> <a id="421" class="Symbol">:</a> <a id="423" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="428" class="Symbol">→</a> <a id="430" href="Generic.Syntax.Bidirectional.html#375" class="Datatype">`Lang</a>

<a id="437" class="Keyword">data</a> <a id="Mode"></a><a id="442" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a> <a id="447" class="Symbol">:</a> <a id="449" class="PrimitiveType">Set</a> <a id="453" class="Keyword">where</a>
  <a id="Mode.Check"></a><a id="461" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a> <a id="Mode.Infer"></a><a id="467" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a> <a id="473" class="Symbol">:</a> <a id="475" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a>

<a id="481" class="Comment">-- On top of the traditional Application and Lambda-Abstraction constructors,</a>
<a id="559" class="Comment">-- we have two change of direction ones: `Emb` which takes inferable terms and</a>
<a id="638" class="Comment">-- makes them checkable (it is enough to compare the inferred type to the</a>
<a id="712" class="Comment">-- candidate provided); and `Cut` which takes a checkable term and makes it</a>
<a id="788" class="Comment">-- inferrable thanks to a type-annotation.</a>

<a id="Lang"></a><a id="832" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="837" class="Symbol">:</a> <a id="839" href="Generic.Syntax.html#381" class="Datatype">Desc</a> <a id="844" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a>
<a id="849" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a>  <a id="855" class="Symbol">=</a>  <a id="858" href="Generic.Syntax.html#411" class="InductiveConstructor">`σ</a> <a id="861" href="Generic.Syntax.Bidirectional.html#375" class="Datatype">`Lang</a> <a id="867" href="Function.html#1927" class="Function Operator">$</a> <a id="869" class="Symbol">λ</a> <a id="871" class="Keyword">where</a>
  <a id="879" href="Generic.Syntax.Bidirectional.html#395" class="InductiveConstructor">App</a>      <a id="888" class="Symbol">→</a> <a id="890" href="Generic.Syntax.html#453" class="InductiveConstructor">`X</a> <a id="893" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="896" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a> <a id="902" class="Symbol">(</a><a id="903" href="Generic.Syntax.html#453" class="InductiveConstructor">`X</a> <a id="906" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="909" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a> <a id="915" class="Symbol">(</a><a id="916" href="Generic.Syntax.html#495" class="InductiveConstructor">`∎</a> <a id="919" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a><a id="924" class="Symbol">))</a>
  <a id="929" href="Generic.Syntax.Bidirectional.html#399" class="InductiveConstructor">Lam</a>      <a id="938" class="Symbol">→</a> <a id="940" href="Generic.Syntax.html#453" class="InductiveConstructor">`X</a> <a id="943" class="Symbol">(</a><a id="944" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a> <a id="950" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="952" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a><a id="954" class="Symbol">)</a> <a id="956" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a> <a id="962" class="Symbol">(</a><a id="963" href="Generic.Syntax.html#495" class="InductiveConstructor">`∎</a> <a id="966" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a><a id="971" class="Symbol">)</a>
  <a id="975" class="Symbol">(</a><a id="976" href="Generic.Syntax.Bidirectional.html#417" class="InductiveConstructor">Cut</a> <a id="980" href="Generic.Syntax.Bidirectional.html#980" class="Bound">σ</a><a id="981" class="Symbol">)</a>  <a id="984" class="Symbol">→</a> <a id="986" href="Generic.Syntax.html#453" class="InductiveConstructor">`X</a> <a id="989" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="992" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a> <a id="998" class="Symbol">(</a><a id="999" href="Generic.Syntax.html#495" class="InductiveConstructor">`∎</a> <a id="1002" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a><a id="1007" class="Symbol">)</a>
  <a id="1011" href="Generic.Syntax.Bidirectional.html#403" class="InductiveConstructor">Emb</a>      <a id="1020" class="Symbol">→</a> <a id="1022" href="Generic.Syntax.html#453" class="InductiveConstructor">`X</a> <a id="1025" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="1028" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a> <a id="1034" class="Symbol">(</a><a id="1035" href="Generic.Syntax.html#495" class="InductiveConstructor">`∎</a> <a id="1038" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a><a id="1043" class="Symbol">)</a>

<a id="1046" class="Keyword">module</a> <a id="PATTERNS"></a><a id="1053" href="Generic.Syntax.Bidirectional.html#1053" class="Module">PATTERNS</a> <a id="1062" class="Keyword">where</a>

  <a id="1071" class="Keyword">pattern</a> <a id="PATTERNS.APP"></a><a id="1079" href="Generic.Syntax.Bidirectional.html#1079" class="InductiveConstructor">APP</a> <a id="1083" href="Generic.Syntax.Bidirectional.html#1102" class="Bound">f</a> <a id="1085" href="Generic.Syntax.Bidirectional.html#1106" class="Bound">t</a>  <a id="1088" class="Symbol">=</a> <a id="1090" href="Generic.Syntax.html#1192" class="InductiveConstructor">`con</a> <a id="1095" class="Symbol">(</a><a id="1096" href="Generic.Syntax.Bidirectional.html#395" class="InductiveConstructor">App</a> <a id="1100" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1102" href="Generic.Syntax.Bidirectional.html#1102" class="Bound">f</a> <a id="1104" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1106" href="Generic.Syntax.Bidirectional.html#1106" class="Bound">t</a> <a id="1108" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1110" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1114" class="Symbol">)</a>
  <a id="1118" class="Keyword">pattern</a> <a id="PATTERNS.LAM"></a><a id="1126" href="Generic.Syntax.Bidirectional.html#1126" class="InductiveConstructor">LAM</a> <a id="1130" href="Generic.Syntax.Bidirectional.html#1149" class="Bound">b</a>    <a id="1135" class="Symbol">=</a> <a id="1137" href="Generic.Syntax.html#1192" class="InductiveConstructor">`con</a> <a id="1142" class="Symbol">(</a><a id="1143" href="Generic.Syntax.Bidirectional.html#399" class="InductiveConstructor">Lam</a> <a id="1147" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1149" href="Generic.Syntax.Bidirectional.html#1149" class="Bound">b</a> <a id="1151" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1153" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1157" class="Symbol">)</a>
  <a id="1161" class="Keyword">pattern</a> <a id="PATTERNS.CUT"></a><a id="1169" href="Generic.Syntax.Bidirectional.html#1169" class="InductiveConstructor">CUT</a> <a id="1173" href="Generic.Syntax.Bidirectional.html#1190" class="Bound">σ</a> <a id="1175" href="Generic.Syntax.Bidirectional.html#1194" class="Bound">t</a>  <a id="1178" class="Symbol">=</a> <a id="1180" href="Generic.Syntax.html#1192" class="InductiveConstructor">`con</a> <a id="1185" class="Symbol">(</a><a id="1186" href="Generic.Syntax.Bidirectional.html#417" class="InductiveConstructor">Cut</a> <a id="1190" href="Generic.Syntax.Bidirectional.html#1190" class="Bound">σ</a> <a id="1192" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1194" href="Generic.Syntax.Bidirectional.html#1194" class="Bound">t</a> <a id="1196" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1198" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1202" class="Symbol">)</a>
  <a id="1206" class="Keyword">pattern</a> <a id="PATTERNS.EMB"></a><a id="1214" href="Generic.Syntax.Bidirectional.html#1214" class="InductiveConstructor">EMB</a> <a id="1218" href="Generic.Syntax.Bidirectional.html#1237" class="Bound">t</a>    <a id="1223" class="Symbol">=</a> <a id="1225" href="Generic.Syntax.html#1192" class="InductiveConstructor">`con</a> <a id="1230" class="Symbol">(</a><a id="1231" href="Generic.Syntax.Bidirectional.html#403" class="InductiveConstructor">Emb</a> <a id="1235" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1237" href="Generic.Syntax.Bidirectional.html#1237" class="Bound">t</a> <a id="1239" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1241" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1245" class="Symbol">)</a>
</pre></body></html>