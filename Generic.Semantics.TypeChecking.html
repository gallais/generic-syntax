<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Semantics.TypeChecking</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">module</a> <a id="8" href="Generic.Semantics.TypeChecking.html" class="Module">Generic.Semantics.TypeChecking</a> <a id="39" class="Keyword">where</a>

<a id="46" class="Keyword">import</a> <a id="53" href="Level.html" class="Module">Level</a>
<a id="59" class="Keyword">import</a> <a id="66" href="Category.Monad.html" class="Module">Category.Monad</a> <a id="81" class="Symbol">as</a> <a id="84" class="Module">CM</a>
<a id="87" class="Keyword">open</a> <a id="92" class="Keyword">import</a> <a id="99" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="109" class="Keyword">open</a> <a id="114" class="Keyword">import</a> <a id="121" href="Data.Bool.html" class="Module">Data.Bool</a>
<a id="131" class="Keyword">open</a> <a id="136" class="Keyword">import</a> <a id="143" href="Data.Product.html" class="Module">Data.Product</a>
<a id="156" class="Keyword">open</a> <a id="161" class="Keyword">import</a> <a id="168" href="Data.List.html" class="Module">Data.List</a> <a id="178" class="Keyword">hiding</a> <a id="185" class="Symbol">(</a><a id="186" href="Data.List.Base.html#4189" class="Function Operator">[_]</a><a id="189" class="Symbol">)</a>
<a id="191" class="Keyword">open</a> <a id="196" class="Keyword">import</a> <a id="203" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Data.Maybe.Categorical.html" class="Module">Data.Maybe.Categorical</a> <a id="254" class="Symbol">as</a> <a id="257" class="Module">MC</a>
<a id="260" class="Keyword">open</a> <a id="265" class="Keyword">import</a> <a id="272" href="Function.html" class="Module">Function</a>

<a id="282" class="Keyword">open</a> <a id="287" class="Keyword">import</a> <a id="294" href="indexed.html" class="Module">indexed</a>
<a id="302" class="Keyword">open</a> <a id="307" class="Keyword">import</a> <a id="314" href="var.html" class="Module">var</a> <a id="318" class="Keyword">hiding</a> <a id="325" class="Symbol">(</a><a id="326" href="var.html#789" class="Function Operator">_&lt;$&gt;_</a><a id="331" class="Symbol">)</a>
<a id="333" class="Keyword">open</a> <a id="338" class="Keyword">import</a> <a id="345" href="environment.html" class="Module">environment</a> <a id="357" class="Keyword">hiding</a> <a id="364" class="Symbol">(</a><a id="365" href="environment.html#556" class="Function Operator">_&lt;$&gt;_</a> <a id="371" class="Symbol">;</a> <a id="373" href="environment.html#1477" class="Function Operator">_&gt;&gt;_</a><a id="377" class="Symbol">)</a>
<a id="379" class="Keyword">open</a> <a id="384" class="Keyword">import</a> <a id="391" href="Generic.Syntax.html" class="Module">Generic.Syntax</a>
<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="Generic.Semantics.html" class="Module">Generic.Semantics</a>

<a id="437" class="Keyword">open</a> <a id="442" class="Keyword">import</a> <a id="449" href="Generic.Syntax.Bidirectional.html" class="Module">Generic.Syntax.Bidirectional</a>

<a id="479" class="Keyword">module</a> <a id="M"></a><a id="486" href="Generic.Semantics.TypeChecking.html#486" class="Module">M</a> <a id="488" class="Symbol">=</a> <a id="490" href="Category.Monad.html#774" class="Module">CM.RawMonad</a> <a id="502" class="Symbol">(</a><a id="503" href="Data.Maybe.Categorical.html#1107" class="Function">MC.monad</a> <a id="512" class="Symbol">{</a><a id="513" href="Agda.Primitive.html#611" class="Primitive">Level.zero</a><a id="523" class="Symbol">})</a>
<a id="526" class="Keyword">open</a> <a id="531" href="Generic.Semantics.TypeChecking.html#486" class="Module">M</a>

<a id="534" class="Keyword">open</a> <a id="539" class="Keyword">import</a> <a id="546" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="584" class="Keyword">hiding</a> <a id="591" class="Symbol">(</a><a id="592" href="Relation.Binary.PropositionalEquality.html#3393" class="InductiveConstructor Operator">[_]</a><a id="595" class="Symbol">)</a>

<a id="598" class="Comment">-- Equality testing for types</a>

<a id="629" class="Keyword">infix</a> <a id="635" class="Number">3</a> <a id="637" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">_==_</a>
<a id="_==_"></a><a id="642" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">_==_</a> <a id="647" class="Symbol">:</a> <a id="649" class="Symbol">(</a><a id="650" href="Generic.Semantics.TypeChecking.html#650" class="Bound">σ</a> <a id="652" href="Generic.Semantics.TypeChecking.html#652" class="Bound">τ</a> <a id="654" class="Symbol">:</a> <a id="656" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a><a id="660" class="Symbol">)</a> <a id="662" class="Symbol">→</a> <a id="664" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="670" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a>
<a id="672" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a>     <a id="678" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">==</a> <a id="681" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a>       <a id="689" class="Symbol">=</a> <a id="691" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="696" href="Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a>
<a id="699" href="Generic.Semantics.TypeChecking.html#699" class="Bound">σ</a> <a id="701" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="703" href="Generic.Semantics.TypeChecking.html#703" class="Bound">τ</a> <a id="705" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">==</a> <a id="708" href="Generic.Semantics.TypeChecking.html#708" class="Bound">σ&#39;</a> <a id="711" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="713" href="Generic.Semantics.TypeChecking.html#713" class="Bound">τ&#39;</a> <a id="716" class="Symbol">=</a> <a id="718" class="Symbol">(</a><a id="719" href="Generic.Semantics.TypeChecking.html#699" class="Bound">σ</a> <a id="721" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">==</a> <a id="724" href="Generic.Semantics.TypeChecking.html#708" class="Bound">σ&#39;</a><a id="726" class="Symbol">)</a> <a id="728" href="Category.Monad.Indexed.html#630" class="Function Operator">&gt;&gt;</a> <a id="731" class="Symbol">(</a><a id="732" href="Generic.Semantics.TypeChecking.html#703" class="Bound">τ</a> <a id="734" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">==</a> <a id="737" href="Generic.Semantics.TypeChecking.html#713" class="Bound">τ&#39;</a><a id="739" class="Symbol">)</a>
<a id="741" class="CatchallClause Symbol">_</a><a id="742" class="CatchallClause">     </a><a id="747" href="Generic.Semantics.TypeChecking.html#642" class="CatchallClause Function Operator">==</a><a id="749" class="CatchallClause"> </a><a id="750" class="CatchallClause Symbol">_</a>       <a id="758" class="Symbol">=</a> <a id="760" href="Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a>

<a id="769" class="Comment">-- Trying to break down a putative arrow type into its constituents</a>
<a id="isArrow"></a><a id="837" href="Generic.Semantics.TypeChecking.html#837" class="Function">isArrow</a> <a id="845" class="Symbol">:</a> <a id="847" class="Symbol">(</a><a id="848" href="Generic.Semantics.TypeChecking.html#848" class="Bound">σ⇒τ</a> <a id="852" class="Symbol">:</a> <a id="854" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a><a id="858" class="Symbol">)</a> <a id="860" class="Symbol">→</a> <a id="862" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="868" class="Symbol">(</a><a id="869" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="874" href="Data.Product.html#1353" class="Function Operator">×</a> <a id="876" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a><a id="880" class="Symbol">)</a>
<a id="882" href="Generic.Semantics.TypeChecking.html#837" class="Function">isArrow</a> <a id="890" class="Symbol">(</a><a id="891" href="Generic.Semantics.TypeChecking.html#891" class="Bound">σ</a> <a id="893" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="895" href="Generic.Semantics.TypeChecking.html#895" class="Bound">τ</a><a id="896" class="Symbol">)</a> <a id="898" class="Symbol">=</a> <a id="900" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="905" class="Symbol">(</a><a id="906" href="Generic.Semantics.TypeChecking.html#891" class="Bound">σ</a> <a id="908" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="910" href="Generic.Semantics.TypeChecking.html#895" class="Bound">τ</a><a id="911" class="Symbol">)</a>
<a id="913" href="Generic.Semantics.TypeChecking.html#837" class="CatchallClause Function">isArrow</a><a id="920" class="CatchallClause"> </a><a id="921" class="CatchallClause Symbol">_</a>       <a id="929" class="Symbol">=</a> <a id="931" href="Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a>

<a id="940" class="Comment">----------------------------------------------------------------------</a>
<a id="1011" class="Comment">-- Type- Checking/Inference</a>

<a id="1040" class="Comment">-- The output of the semantics is the Type-(Check/Infer) process itself.</a>
<a id="1113" class="Comment">-- Hence the following definition</a>

<a id="Type-"></a><a id="1148" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a> <a id="1154" class="Symbol">:</a> <a id="1156" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a> <a id="1161" class="Symbol">→</a> <a id="1163" class="PrimitiveType">Set</a>
<a id="1167" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a> <a id="1173" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a>  <a id="1180" class="Symbol">=</a> <a id="1182" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="1187" class="Symbol">→</a>  <a id="1190" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="1196" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a>
<a id="1198" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a> <a id="1204" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a>  <a id="1211" class="Symbol">=</a>         <a id="1221" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="1227" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a>

<a id="Var-"></a><a id="1233" href="Generic.Semantics.TypeChecking.html#1233" class="Function">Var-</a> <a id="1238" class="Symbol">:</a> <a id="1240" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a> <a id="1245" class="Symbol">→</a> <a id="1247" class="PrimitiveType">Set</a>
<a id="1251" href="Generic.Semantics.TypeChecking.html#1233" class="Function">Var-</a> <a id="1256" class="Symbol">_</a> <a id="1258" class="Symbol">=</a> <a id="1260" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a>

<a id="Typecheck"></a><a id="1266" href="Generic.Semantics.TypeChecking.html#1266" class="Function">Typecheck</a> <a id="1276" class="Symbol">:</a> <a id="1278" href="Generic.Semantics.html#487" class="Record">Sem</a> <a id="1282" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="1287" class="Symbol">(</a><a id="1288" href="Function.html#1109" class="Function">const</a> <a id="1294" href="Function.html#769" class="Function Operator">∘</a> <a id="1296" href="Generic.Semantics.TypeChecking.html#1233" class="Function">Var-</a><a id="1300" class="Symbol">)</a> <a id="1302" class="Symbol">(</a><a id="1303" href="Function.html#1109" class="Function">const</a> <a id="1309" href="Function.html#769" class="Function Operator">∘</a> <a id="1311" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a><a id="1316" class="Symbol">)</a>
<a id="1318" href="Generic.Semantics.TypeChecking.html#1266" class="Function">Typecheck</a> <a id="1328" class="Symbol">=</a> <a id="1330" class="Keyword">record</a> <a id="1337" class="Symbol">{</a> <a id="1339" class="Field">th^𝓥</a> <a id="1344" class="Symbol">=</a> <a id="1346" class="Symbol">λ</a> <a id="1348" href="Generic.Semantics.TypeChecking.html#1348" class="Bound">v</a> <a id="1350" href="Generic.Semantics.TypeChecking.html#1350" class="Bound">ρ</a> <a id="1352" class="Symbol">→</a> <a id="1354" href="Generic.Semantics.TypeChecking.html#1348" class="Bound">v</a><a id="1355" class="Symbol">;</a> <a id="1357" class="Field">var</a> <a id="1361" class="Symbol">=</a> <a id="1363" href="Generic.Semantics.TypeChecking.html#1392" class="Function">var</a> <a id="1367" class="Symbol">_;</a> <a id="1370" class="Field">alg</a> <a id="1374" class="Symbol">=</a> <a id="1376" href="Generic.Semantics.TypeChecking.html#1474" class="Function">alg</a> <a id="1380" class="Symbol">}</a> <a id="1382" class="Keyword">where</a>

   <a id="1392" href="Generic.Semantics.TypeChecking.html#1392" class="Function">var</a> <a id="1396" class="Symbol">:</a> <a id="1398" class="Symbol">(</a><a id="1399" href="Generic.Semantics.TypeChecking.html#1399" class="Bound">i</a> <a id="1401" class="Symbol">:</a> <a id="1403" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="1407" class="Symbol">)</a> <a id="1409" class="Symbol">→</a> <a id="1411" href="Generic.Semantics.TypeChecking.html#1233" class="Function">Var-</a> <a id="1416" href="Generic.Semantics.TypeChecking.html#1399" class="Bound">i</a> <a id="1418" class="Symbol">→</a> <a id="1420" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a> <a id="1426" href="Generic.Semantics.TypeChecking.html#1399" class="Bound">i</a>
   <a id="1431" href="Generic.Semantics.TypeChecking.html#1392" class="Function">var</a> <a id="1435" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a>  <a id="1442" class="Symbol">=</a> <a id="1444" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a>
   <a id="1452" href="Generic.Semantics.TypeChecking.html#1392" class="Function">var</a> <a id="1456" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a>  <a id="1463" class="Symbol">=</a> <a id="1465" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">_==_</a>

   <a id="1474" href="Generic.Semantics.TypeChecking.html#1474" class="Function">alg</a> <a id="1478" class="Symbol">:</a> <a id="1480" class="Symbol">{</a><a id="1481" href="Generic.Semantics.TypeChecking.html#1481" class="Bound">i</a> <a id="1483" class="Symbol">:</a> <a id="1485" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="1489" class="Symbol">}</a> <a id="1491" class="Symbol">{</a><a id="1492" href="Generic.Semantics.TypeChecking.html#1492" class="Bound">Γ</a> <a id="1494" class="Symbol">:</a> <a id="1496" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="1501" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="1505" class="Symbol">}</a> <a id="1507" class="Symbol">→</a>
         <a id="1518" href="Generic.Syntax.html#727" class="Function Operator">⟦</a> <a id="1520" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="1525" href="Generic.Syntax.html#727" class="Function Operator">⟧</a> <a id="1527" class="Symbol">(</a><a id="1528" href="environment.html#3741" class="Function">Kripke</a> <a id="1535" class="Symbol">(</a><a id="1536" href="indexed.html#854" class="Function">κ</a> <a id="1538" href="Function.html#769" class="Function Operator">∘</a> <a id="1540" href="Generic.Semantics.TypeChecking.html#1233" class="Function">Var-</a><a id="1544" class="Symbol">)</a> <a id="1546" class="Symbol">(</a><a id="1547" href="indexed.html#854" class="Function">κ</a> <a id="1549" href="Function.html#769" class="Function Operator">∘</a> <a id="1551" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a><a id="1556" class="Symbol">))</a> <a id="1559" href="Generic.Semantics.TypeChecking.html#1481" class="Bound">i</a> <a id="1561" href="Generic.Semantics.TypeChecking.html#1492" class="Bound">Γ</a> <a id="1563" class="Symbol">→</a> <a id="1565" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a> <a id="1571" href="Generic.Semantics.TypeChecking.html#1481" class="Bound">i</a>
   <a id="1576" class="Comment">-- Application:</a>
   <a id="1595" class="Comment">--  * Infer the type of the function</a>
   <a id="1635" class="Comment">--  * Make sure it is an arrow type</a>
   <a id="1674" class="Comment">--  * Check the argument belongs to the domain</a>
   <a id="1724" class="Comment">--  * Return the codomain</a>
   <a id="1753" href="Generic.Semantics.TypeChecking.html#1474" class="Function">alg</a> <a id="1757" class="Symbol">(</a><a id="1758" href="Generic.Syntax.Bidirectional.html#395" class="InductiveConstructor">App</a> <a id="1762" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1764" href="Generic.Semantics.TypeChecking.html#1764" class="Bound">f</a> <a id="1766" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1768" href="Generic.Semantics.TypeChecking.html#1768" class="Bound">t</a> <a id="1770" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1772" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1776" class="Symbol">)</a>  <a id="1779" class="Symbol">=</a>  <a id="1782" href="Generic.Semantics.TypeChecking.html#1764" class="Bound">f</a>            <a id="1795" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="1799" class="Symbol">λ</a> <a id="1801" href="Generic.Semantics.TypeChecking.html#1801" class="Bound">σ⇒τ</a> <a id="1805" class="Symbol">→</a>
                                <a id="1839" href="Generic.Semantics.TypeChecking.html#837" class="Function">isArrow</a> <a id="1847" href="Generic.Semantics.TypeChecking.html#1801" class="Bound">σ⇒τ</a>  <a id="1852" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="1856" href="Data.Product.html#3464" class="Function">uncurry</a> <a id="1864" class="Symbol">λ</a> <a id="1866" href="Generic.Semantics.TypeChecking.html#1866" class="Bound">σ</a> <a id="1868" href="Generic.Semantics.TypeChecking.html#1868" class="Bound">τ</a> <a id="1870" class="Symbol">→</a>
                                <a id="1904" href="Generic.Semantics.TypeChecking.html#1868" class="Bound">τ</a> <a id="1906" href="Category.Functor.html#533" class="Function Operator">&lt;$</a> <a id="1909" href="Generic.Semantics.TypeChecking.html#1768" class="Bound">t</a> <a id="1911" href="Generic.Semantics.TypeChecking.html#1866" class="Bound">σ</a>
   <a id="1916" class="Comment">-- Lambda-Abstraction:</a>
   <a id="1942" class="Comment">--  * Make sure the candidate is an arrow type</a>
   <a id="1992" class="Comment">--  * Push a fresh variable of type the domain in the context</a>
   <a id="2057" class="Comment">--  * Check the body has type the codomain in the extended context</a>
   <a id="2127" href="Generic.Semantics.TypeChecking.html#1474" class="Function">alg</a> <a id="2131" class="Symbol">(</a><a id="2132" href="Generic.Syntax.Bidirectional.html#399" class="InductiveConstructor">Lam</a> <a id="2136" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2138" href="Generic.Semantics.TypeChecking.html#2138" class="Bound">b</a> <a id="2140" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2142" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="2146" class="Symbol">)</a>      <a id="2153" class="Symbol">=</a>  <a id="2156" class="Symbol">λ</a> <a id="2158" href="Generic.Semantics.TypeChecking.html#2158" class="Bound">σ⇒τ</a> <a id="2162" class="Symbol">→</a> <a id="2164" href="Generic.Semantics.TypeChecking.html#837" class="Function">isArrow</a> <a id="2172" href="Generic.Semantics.TypeChecking.html#2158" class="Bound">σ⇒τ</a> <a id="2176" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="2180" href="Data.Product.html#3464" class="Function">uncurry</a> <a id="2188" class="Symbol">λ</a> <a id="2190" href="Generic.Semantics.TypeChecking.html#2190" class="Bound">σ</a> <a id="2192" href="Generic.Semantics.TypeChecking.html#2192" class="Bound">τ</a> <a id="2194" class="Symbol">→</a>
                                <a id="2228" href="Generic.Semantics.TypeChecking.html#2138" class="Bound">b</a> <a id="2230" class="Symbol">(</a><a id="2231" href="environment.html#2306" class="Function">extend</a> <a id="2238" class="Symbol">{</a><a id="2239" class="Argument">σ</a> <a id="2241" class="Symbol">=</a> <a id="2243" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a><a id="2248" class="Symbol">})</a> <a id="2251" class="Symbol">(</a><a id="2252" href="environment.html#515" class="Function">ε</a> <a id="2254" href="environment.html#2070" class="Function Operator">∙</a> <a id="2256" href="Generic.Semantics.TypeChecking.html#2190" class="Bound">σ</a><a id="2257" class="Symbol">)</a> <a id="2259" href="Generic.Semantics.TypeChecking.html#2192" class="Bound">τ</a>
   <a id="2264" class="Comment">-- Cut aka Type Annotation:</a>
   <a id="2295" class="Comment">--  * Check the term as the ascribed type</a>
   <a id="2340" class="Comment">--  * Return that type</a>
   <a id="2366" href="Generic.Semantics.TypeChecking.html#1474" class="Function">alg</a> <a id="2370" class="Symbol">(</a><a id="2371" href="Generic.Syntax.Bidirectional.html#417" class="InductiveConstructor">Cut</a> <a id="2375" href="Generic.Semantics.TypeChecking.html#2375" class="Bound">σ</a> <a id="2377" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2379" href="Generic.Semantics.TypeChecking.html#2379" class="Bound">t</a> <a id="2381" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2383" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="2387" class="Symbol">)</a>    <a id="2392" class="Symbol">=</a>  <a id="2395" href="Generic.Semantics.TypeChecking.html#2375" class="Bound">σ</a> <a id="2397" href="Category.Functor.html#533" class="Function Operator">&lt;$</a> <a id="2400" href="Generic.Semantics.TypeChecking.html#2379" class="Bound">t</a> <a id="2402" href="Generic.Semantics.TypeChecking.html#2375" class="Bound">σ</a>
   <a id="2407" class="Comment">-- Embedding:</a>
   <a id="2424" class="Comment">--  * Infer the type of the term</a>
   <a id="2460" class="Comment">--  * Check it is equal to the candidate</a>
   <a id="2504" href="Generic.Semantics.TypeChecking.html#1474" class="Function">alg</a> <a id="2508" class="Symbol">(</a><a id="2509" href="Generic.Syntax.Bidirectional.html#403" class="InductiveConstructor">Emb</a> <a id="2513" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2515" href="Generic.Semantics.TypeChecking.html#2515" class="Bound">t</a> <a id="2517" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2519" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="2523" class="Symbol">)</a>      <a id="2530" class="Symbol">=</a>  <a id="2533" class="Symbol">λ</a> <a id="2535" href="Generic.Semantics.TypeChecking.html#2535" class="Bound">σ</a> <a id="2537" class="Symbol">→</a> <a id="2539" href="Generic.Semantics.TypeChecking.html#2515" class="Bound">t</a> <a id="2541" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="2545" class="Symbol">λ</a> <a id="2547" href="Generic.Semantics.TypeChecking.html#2547" class="Bound">τ</a> <a id="2549" class="Symbol">→</a> <a id="2551" href="Generic.Semantics.TypeChecking.html#2535" class="Bound">σ</a> <a id="2553" href="Generic.Semantics.TypeChecking.html#642" class="Function Operator">==</a> <a id="2556" href="Generic.Semantics.TypeChecking.html#2547" class="Bound">τ</a>

<a id="type-"></a><a id="2559" href="Generic.Semantics.TypeChecking.html#2559" class="Function">type-</a> <a id="2565" class="Symbol">:</a> <a id="2567" class="Symbol">(</a><a id="2568" href="Generic.Semantics.TypeChecking.html#2568" class="Bound">p</a> <a id="2570" class="Symbol">:</a> <a id="2572" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="2576" class="Symbol">)</a> <a id="2578" class="Symbol">→</a> <a id="2580" href="Generic.Syntax.html#1494" class="Function">TM</a> <a id="2583" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="2588" href="Generic.Semantics.TypeChecking.html#2568" class="Bound">p</a> <a id="2590" class="Symbol">→</a> <a id="2592" href="Generic.Semantics.TypeChecking.html#1148" class="Function">Type-</a> <a id="2598" href="Generic.Semantics.TypeChecking.html#2568" class="Bound">p</a>
<a id="2600" href="Generic.Semantics.TypeChecking.html#2559" class="Function">type-</a> <a id="2606" href="Generic.Semantics.TypeChecking.html#2606" class="Bound">p</a> <a id="2608" href="Generic.Semantics.TypeChecking.html#2608" class="Bound">t</a> <a id="2610" class="Symbol">=</a> <a id="2612" href="Generic.Semantics.html#707" class="Function">Sem.sem</a> <a id="2620" href="Generic.Semantics.TypeChecking.html#1266" class="Function">Typecheck</a> <a id="2630" class="Symbol">{</a><a id="2631" class="Argument">Δ</a> <a id="2633" class="Symbol">=</a> <a id="2635" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a><a id="2637" class="Symbol">}</a> <a id="2639" href="environment.html#515" class="Function">ε</a> <a id="2641" href="Generic.Semantics.TypeChecking.html#2608" class="Bound">t</a>

<a id="2644" class="Comment">----------------------------------------------------------------------</a>
<a id="2715" class="Comment">-- Example</a>

<a id="2727" href="Generic.Semantics.TypeChecking.html#2727" class="Function">_</a> <a id="2729" class="Symbol">:</a> <a id="2731" class="Keyword">let</a> <a id="2735" class="Keyword">open</a> <a id="2740" href="Generic.Syntax.Bidirectional.html#1053" class="Module">PATTERNS</a>
        <a id="2757" href="Generic.Semantics.TypeChecking.html#2757" class="Bound">id</a>  <a id="2761" class="Symbol">:</a> <a id="2763" href="Generic.Syntax.html#1494" class="Function">TM</a> <a id="2766" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="2771" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a>
        <a id="2785" href="Generic.Semantics.TypeChecking.html#2757" class="Bound">id</a>  <a id="2789" class="Symbol">=</a> <a id="2791" href="Generic.Syntax.Bidirectional.html#1126" class="InductiveConstructor">LAM</a> <a id="2795" class="Symbol">(</a><a id="2796" href="Generic.Syntax.Bidirectional.html#1214" class="InductiveConstructor">EMB</a> <a id="2800" class="Symbol">(</a><a id="2801" href="Generic.Syntax.html#1116" class="InductiveConstructor">`var</a> <a id="2806" href="var.html#578" class="InductiveConstructor">z</a><a id="2807" class="Symbol">))</a>
    <a id="2814" class="Keyword">in</a> <a id="2817" href="Generic.Semantics.TypeChecking.html#2559" class="Function">type-</a> <a id="2823" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a> <a id="2829" class="Symbol">(</a><a id="2830" href="Generic.Syntax.Bidirectional.html#1079" class="InductiveConstructor">APP</a> <a id="2834" class="Symbol">(</a><a id="2835" href="Generic.Syntax.Bidirectional.html#1169" class="InductiveConstructor">CUT</a> <a id="2839" class="Symbol">((</a><a id="2841" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a> <a id="2843" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2845" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a><a id="2846" class="Symbol">)</a> <a id="2848" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2850" class="Symbol">(</a><a id="2851" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a> <a id="2853" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2855" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a><a id="2856" class="Symbol">))</a> <a id="2859" href="Generic.Semantics.TypeChecking.html#2757" class="Bound">id</a><a id="2861" class="Symbol">)</a> <a id="2863" href="Generic.Semantics.TypeChecking.html#2757" class="Bound">id</a><a id="2865" class="Symbol">)</a>
     <a id="2872" href="Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="2874" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="2879" class="Symbol">(</a><a id="2880" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a> <a id="2882" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2884" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a><a id="2885" class="Symbol">)</a>
<a id="2887" class="Symbol">_</a> <a id="2889" class="Symbol">=</a> <a id="2891" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
</pre></body></html>