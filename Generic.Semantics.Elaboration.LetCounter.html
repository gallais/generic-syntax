<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Semantics.Elaboration.LetCounter</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--sized-types</a> <a id="34" class="Symbol">#-}</a>

<a id="39" class="Keyword">module</a> <a id="46" href="Generic.Semantics.Elaboration.LetCounter.html" class="Module">Generic.Semantics.Elaboration.LetCounter</a> <a id="87" class="Keyword">where</a>

<a id="94" class="Keyword">import</a> <a id="101" href="Level.html" class="Module">Level</a> <a id="107" class="Symbol">as</a> <a id="110" class="Module">L</a>
<a id="112" class="Keyword">open</a> <a id="117" class="Keyword">import</a> <a id="124" href="Size.html" class="Module">Size</a>
<a id="129" class="Keyword">open</a> <a id="134" class="Keyword">import</a> <a id="141" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>
<a id="163" class="Keyword">open</a> <a id="168" class="Keyword">import</a> <a id="175" href="Agda.Builtin.Bool.html" class="Module">Agda.Builtin.Bool</a>
<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Data.Product.html" class="Module">Data.Product</a>
<a id="218" class="Keyword">import</a> <a id="225" href="Data.Product.Categorical.Right.html" class="Module">Data.Product.Categorical.Right</a> <a id="256" class="Symbol">as</a> <a id="259" class="Module">PC</a>
<a id="262" class="Keyword">open</a> <a id="267" class="Keyword">import</a> <a id="274" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="289" class="Keyword">open</a> <a id="294" class="Keyword">import</a> <a id="301" href="Data.List.All.html" class="Module">Data.List.All</a> <a id="315" class="Symbol">as</a> <a id="318" class="Module">All</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Data.List.All.Properties.html" class="Module">Data.List.All.Properties</a>
<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Function.html" class="Module">Function</a>

<a id="381" class="Keyword">open</a> <a id="386" class="Keyword">import</a> <a id="393" href="Data.Var.html" class="Module">Data.Var</a>
<a id="402" class="Keyword">open</a> <a id="407" class="Keyword">import</a> <a id="414" href="Data.Var.Varlike.html" class="Module">Data.Var.Varlike</a>
<a id="431" class="Keyword">open</a> <a id="436" class="Keyword">import</a> <a id="443" href="Data.Environment.html" class="Module">Data.Environment</a> <a id="460" class="Keyword">using</a> <a id="466" class="Symbol">(</a><a id="467" href="Data.Environment.html#3714" class="Function">Kripke</a><a id="473" class="Symbol">;</a> <a id="475" href="Data.Environment.html#3454" class="Function">th^Var</a><a id="481" class="Symbol">;</a> <a id="483" href="Data.Environment.html#647" class="Function">ε</a><a id="484" class="Symbol">;</a> <a id="486" href="Data.Environment.html#2062" class="Function Operator">_∙_</a><a id="489" class="Symbol">;</a> <a id="491" href="Data.Environment.html#2322" class="Function">extend</a><a id="497" class="Symbol">)</a>
<a id="499" class="Keyword">open</a> <a id="504" class="Keyword">import</a> <a id="511" href="Generic.Syntax.html" class="Module">Generic.Syntax</a>
<a id="526" class="Keyword">import</a> <a id="533" href="Generic.Syntax.LetCounter.html" class="Module">Generic.Syntax.LetCounter</a> <a id="559" class="Symbol">as</a> <a id="562" class="Module">LetCounter</a>
<a id="573" class="Keyword">open</a> <a id="578" href="Generic.Syntax.LetCounter.html" class="Module">LetCounter</a> <a id="589" class="Keyword">hiding</a> <a id="596" class="Symbol">(</a><a id="597" href="Generic.Syntax.LetCounter.html#1089" class="Function">Let</a><a id="600" class="Symbol">)</a>
<a id="602" class="Keyword">import</a> <a id="609" href="Generic.Syntax.LetBinder.html" class="Module">Generic.Syntax.LetBinder</a> <a id="634" class="Symbol">as</a> <a id="637" class="Module">LetBinder</a>
<a id="647" class="Keyword">open</a> <a id="652" class="Keyword">import</a> <a id="659" href="Generic.Semantics.html" class="Module">Generic.Semantics</a>
<a id="677" class="Keyword">open</a> <a id="682" class="Keyword">import</a> <a id="689" href="Generic.Semantics.Syntactic.html" class="Module">Generic.Semantics.Syntactic</a>

<a id="718" class="Keyword">module</a> <a id="725" href="Generic.Semantics.Elaboration.LetCounter.html#725" class="Module">_</a> <a id="727" class="Symbol">{</a><a id="728" href="Generic.Semantics.Elaboration.LetCounter.html#728" class="Bound">I</a> <a id="730" class="Symbol">:</a> <a id="732" class="PrimitiveType">Set</a><a id="735" class="Symbol">}</a> <a id="737" class="Symbol">{</a><a id="738" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="740" class="Symbol">:</a> <a id="742" href="Generic.Syntax.html#497" class="Datatype">Desc</a> <a id="747" href="Generic.Semantics.Elaboration.LetCounter.html#728" class="Bound">I</a><a id="748" class="Symbol">}</a> <a id="750" class="Keyword">where</a>

  <a id="759" class="Keyword">module</a> <a id="PCR"></a><a id="766" href="Generic.Semantics.Elaboration.LetCounter.html#766" class="Module">PCR</a> <a id="770" class="Symbol">{</a><a id="771" href="Generic.Semantics.Elaboration.LetCounter.html#771" class="Bound">Γ</a> <a id="773" class="Symbol">:</a> <a id="775" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="780" href="Generic.Semantics.Elaboration.LetCounter.html#728" class="Bound">I</a><a id="781" class="Symbol">}</a> <a id="783" class="Symbol">=</a> <a id="785" href="Data.Product.Categorical.Right.html" class="Module">PC</a> <a id="788" href="Agda.Primitive.html#611" class="Primitive">L.zero</a> <a id="795" class="Symbol">(</a><a id="796" href="Generic.Syntax.LetCounter.html#892" class="Function">rawMonoid</a> <a id="806" href="Generic.Semantics.Elaboration.LetCounter.html#771" class="Bound">Γ</a><a id="807" class="Symbol">)</a>

  <a id="812" href="Generic.Semantics.Elaboration.LetCounter.html#812" class="Function">Counted</a> <a id="820" class="Symbol">:</a> <a id="822" href="Generic.Semantics.Elaboration.LetCounter.html#728" class="Bound">I</a> <a id="824" href="Data.Var.html#511" class="Function Operator">─Scoped</a> <a id="832" class="Symbol">→</a> <a id="834" href="Generic.Semantics.Elaboration.LetCounter.html#728" class="Bound">I</a> <a id="836" href="Data.Var.html#511" class="Function Operator">─Scoped</a>
  <a id="846" href="Generic.Semantics.Elaboration.LetCounter.html#812" class="Function">Counted</a> <a id="854" href="Generic.Semantics.Elaboration.LetCounter.html#854" class="Bound">T</a> <a id="856" href="Generic.Semantics.Elaboration.LetCounter.html#856" class="Bound">i</a> <a id="858" href="Generic.Semantics.Elaboration.LetCounter.html#858" class="Bound">Γ</a> <a id="860" class="Symbol">=</a> <a id="862" href="Generic.Semantics.Elaboration.LetCounter.html#854" class="Bound">T</a> <a id="864" href="Generic.Semantics.Elaboration.LetCounter.html#856" class="Bound">i</a> <a id="866" href="Generic.Semantics.Elaboration.LetCounter.html#858" class="Bound">Γ</a> <a id="868" href="Data.Product.html#1389" class="Function Operator">×</a> <a id="870" href="Generic.Syntax.LetCounter.html#562" class="Function">Count</a> <a id="876" href="Generic.Semantics.Elaboration.LetCounter.html#858" class="Bound">Γ</a>

  <a id="881" href="Generic.Semantics.Elaboration.LetCounter.html#881" class="Function">count</a> <a id="887" class="Symbol">:</a> <a id="889" class="Symbol">∀</a> <a id="891" class="Symbol">{</a><a id="892" href="Generic.Semantics.Elaboration.LetCounter.html#892" class="Bound">σ</a> <a id="894" href="Generic.Semantics.Elaboration.LetCounter.html#894" class="Bound">Γ</a><a id="895" class="Symbol">}</a> <a id="897" href="Generic.Semantics.Elaboration.LetCounter.html#897" class="Bound">e</a> <a id="899" class="Symbol">→</a> <a id="901" href="Generic.Syntax.html#898" class="Function Operator">⟦</a> <a id="903" href="Generic.Semantics.Elaboration.LetCounter.html#897" class="Bound">e</a> <a id="905" href="Generic.Syntax.html#898" class="Function Operator">⟧</a> <a id="907" class="Symbol">(</a><a id="908" href="Data.Environment.html#3714" class="Function">Kripke</a> <a id="915" href="Data.Var.html#616" class="Datatype">Var</a> <a id="919" class="Symbol">(</a><a id="920" href="Generic.Semantics.Elaboration.LetCounter.html#812" class="Function">Counted</a> <a id="928" class="Symbol">(</a><a id="929" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="932" class="Symbol">(</a><a id="933" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="935" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="938" href="Generic.Syntax.LetCounter.html#1089" class="Function">LetCounter.Let</a><a id="952" class="Symbol">)</a> <a id="954" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="955" class="Symbol">)))</a> <a id="959" href="Generic.Semantics.Elaboration.LetCounter.html#892" class="Bound">σ</a> <a id="961" href="Generic.Semantics.Elaboration.LetCounter.html#894" class="Bound">Γ</a> <a id="963" class="Symbol">→</a>
                      <a id="987" href="Generic.Semantics.Elaboration.LetCounter.html#812" class="Function">Counted</a> <a id="995" class="Symbol">(</a><a id="996" href="Generic.Syntax.html#898" class="Function Operator">⟦</a> <a id="998" href="Generic.Semantics.Elaboration.LetCounter.html#897" class="Bound">e</a> <a id="1000" href="Generic.Syntax.html#898" class="Function Operator">⟧</a> <a id="1002" class="Symbol">(</a><a id="1003" href="Generic.Syntax.html#1137" class="Function">Scope</a> <a id="1009" class="Symbol">(</a><a id="1010" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="1013" class="Symbol">(</a><a id="1014" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="1016" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="1019" href="Generic.Syntax.LetCounter.html#1089" class="Function">LetCounter.Let</a><a id="1033" class="Symbol">)</a> <a id="1035" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="1036" class="Symbol">)))</a> <a id="1040" href="Generic.Semantics.Elaboration.LetCounter.html#892" class="Bound">σ</a> <a id="1042" href="Generic.Semantics.Elaboration.LetCounter.html#894" class="Bound">Γ</a>
  <a id="1046" href="Generic.Semantics.Elaboration.LetCounter.html#881" class="Function">count</a> <a id="1052" class="Symbol">(</a><a id="1053" href="Generic.Syntax.html#527" class="InductiveConstructor">`σ</a> <a id="1056" href="Generic.Semantics.Elaboration.LetCounter.html#1056" class="Bound">A</a> <a id="1058" href="Generic.Semantics.Elaboration.LetCounter.html#1058" class="Bound">e</a><a id="1059" class="Symbol">)</a>   <a id="1063" class="Symbol">(</a><a id="1064" href="Generic.Semantics.Elaboration.LetCounter.html#1064" class="Bound">a</a> <a id="1066" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1068" href="Generic.Semantics.Elaboration.LetCounter.html#1068" class="Bound">t</a><a id="1069" class="Symbol">)</a>  <a id="1072" class="Symbol">=</a> <a id="1074" href="Data.Product.html#2369" class="Function">map₁</a> <a id="1079" class="Symbol">(</a><a id="1080" href="Generic.Semantics.Elaboration.LetCounter.html#1064" class="Bound">a</a> <a id="1082" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,_</a><a id="1084" class="Symbol">)</a> <a id="1086" class="Symbol">(</a><a id="1087" href="Generic.Semantics.Elaboration.LetCounter.html#881" class="Function">count</a> <a id="1093" class="Symbol">(</a><a id="1094" href="Generic.Semantics.Elaboration.LetCounter.html#1058" class="Bound">e</a> <a id="1096" href="Generic.Semantics.Elaboration.LetCounter.html#1064" class="Bound">a</a><a id="1097" class="Symbol">)</a> <a id="1099" href="Generic.Semantics.Elaboration.LetCounter.html#1068" class="Bound">t</a><a id="1100" class="Symbol">)</a>
  <a id="1104" href="Generic.Semantics.Elaboration.LetCounter.html#881" class="Function">count</a> <a id="1110" class="Symbol">(</a><a id="1111" href="Generic.Syntax.html#569" class="InductiveConstructor">`X</a> <a id="1114" href="Generic.Semantics.Elaboration.LetCounter.html#1114" class="Bound">Δ</a> <a id="1116" href="Generic.Semantics.Elaboration.LetCounter.html#1116" class="Bound">j</a> <a id="1118" href="Generic.Semantics.Elaboration.LetCounter.html#1118" class="Bound">e</a><a id="1119" class="Symbol">)</a> <a id="1121" class="Symbol">(</a><a id="1122" href="Generic.Semantics.Elaboration.LetCounter.html#1122" class="Bound">kr</a> <a id="1125" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1127" href="Generic.Semantics.Elaboration.LetCounter.html#1127" class="Bound">t</a><a id="1128" class="Symbol">)</a> <a id="1130" class="Symbol">=</a>
    <a id="1136" class="Keyword">let</a> <a id="1140" class="Symbol">(</a><a id="1141" href="Generic.Semantics.Elaboration.LetCounter.html#1141" class="Bound">r</a> <a id="1143" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1145" href="Generic.Semantics.Elaboration.LetCounter.html#1145" class="Bound">cr</a><a id="1147" class="Symbol">)</a> <a id="1149" class="Symbol">=</a> <a id="1151" href="Data.Var.Varlike.html#1200" class="Function">reify</a> <a id="1157" href="Data.Var.Varlike.html#992" class="Function">vl^Var</a> <a id="1164" href="Generic.Semantics.Elaboration.LetCounter.html#1114" class="Bound">Δ</a> <a id="1166" href="Generic.Semantics.Elaboration.LetCounter.html#1116" class="Bound">j</a> <a id="1168" href="Generic.Semantics.Elaboration.LetCounter.html#1122" class="Bound">kr</a>
        <a id="1179" class="Symbol">(</a><a id="1180" href="Generic.Semantics.Elaboration.LetCounter.html#1180" class="Bound">u</a> <a id="1182" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1184" href="Generic.Semantics.Elaboration.LetCounter.html#1184" class="Bound">cu</a><a id="1186" class="Symbol">)</a> <a id="1188" class="Symbol">=</a> <a id="1190" href="Generic.Semantics.Elaboration.LetCounter.html#881" class="Function">count</a> <a id="1196" href="Generic.Semantics.Elaboration.LetCounter.html#1118" class="Bound">e</a> <a id="1198" href="Generic.Semantics.Elaboration.LetCounter.html#1127" class="Bound">t</a>
    <a id="1204" class="Keyword">in</a> <a id="1207" class="Symbol">(</a><a id="1208" href="Generic.Semantics.Elaboration.LetCounter.html#1141" class="Bound">r</a> <a id="1210" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1212" href="Generic.Semantics.Elaboration.LetCounter.html#1180" class="Bound">u</a><a id="1213" class="Symbol">)</a> <a id="1215" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1217" href="Generic.Syntax.LetCounter.html#775" class="Function">merge</a> <a id="1223" class="Symbol">(</a><a id="1224" href="Data.List.Relation.Unary.All.Properties.html#8110" class="Function">++⁻ʳ</a> <a id="1229" href="Generic.Semantics.Elaboration.LetCounter.html#1114" class="Bound">Δ</a> <a id="1231" href="Generic.Semantics.Elaboration.LetCounter.html#1145" class="Bound">cr</a><a id="1233" class="Symbol">)</a> <a id="1235" href="Generic.Semantics.Elaboration.LetCounter.html#1184" class="Bound">cu</a>
  <a id="1240" href="Generic.Semantics.Elaboration.LetCounter.html#881" class="Function">count</a> <a id="1246" class="Symbol">(</a><a id="1247" href="Generic.Syntax.html#611" class="InductiveConstructor">`∎</a> <a id="1250" href="Generic.Semantics.Elaboration.LetCounter.html#1250" class="Bound">eq</a><a id="1252" class="Symbol">)</a>    <a id="1257" href="Generic.Semantics.Elaboration.LetCounter.html#1257" class="Bound">t</a>        <a id="1266" class="Symbol">=</a> <a id="1268" href="Generic.Semantics.Elaboration.LetCounter.html#1257" class="Bound">t</a> <a id="1270" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1272" href="Generic.Syntax.LetCounter.html#616" class="Function">zeros</a>

  <a id="1281" href="Generic.Semantics.Elaboration.LetCounter.html#1281" class="Function">LetCount</a> <a id="1290" class="Symbol">:</a> <a id="1292" href="Generic.Semantics.html#718" class="Record">Semantics</a> <a id="1302" class="Symbol">(</a><a id="1303" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="1305" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="1308" href="Generic.Syntax.LetBinder.html#385" class="Function">LetBinder.Let</a><a id="1321" class="Symbol">)</a> <a id="1323" href="Data.Var.html#616" class="Datatype">Var</a> <a id="1327" class="Symbol">(</a><a id="1328" href="Generic.Semantics.Elaboration.LetCounter.html#812" class="Function">Counted</a> <a id="1336" class="Symbol">(</a><a id="1337" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="1340" class="Symbol">(</a><a id="1341" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="1343" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="1346" href="Generic.Syntax.LetCounter.html#1089" class="Function">LetCounter.Let</a><a id="1360" class="Symbol">)</a> <a id="1362" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="1363" class="Symbol">))</a>
  <a id="1368" href="Generic.Semantics.html#783" class="Field">Semantics.th^𝓥</a>  <a id="1384" href="Generic.Semantics.Elaboration.LetCounter.html#1281" class="Function">LetCount</a> <a id="1393" class="Symbol">=</a> <a id="1395" href="Data.Environment.html#3454" class="Function">th^Var</a>
  <a id="1404" href="Generic.Semantics.html#810" class="Field">Semantics.var</a>    <a id="1421" href="Generic.Semantics.Elaboration.LetCounter.html#1281" class="Function">LetCount</a> <a id="1430" class="Symbol">=</a> <a id="1432" class="Symbol">λ</a> <a id="1434" href="Generic.Semantics.Elaboration.LetCounter.html#1434" class="Bound">v</a> <a id="1436" class="Symbol">→</a> <a id="1438" href="Generic.Syntax.html#1281" class="InductiveConstructor">`var</a> <a id="1443" href="Generic.Semantics.Elaboration.LetCounter.html#1434" class="Bound">v</a> <a id="1445" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1447" href="Generic.Syntax.LetCounter.html#670" class="Function">fromVar</a> <a id="1455" href="Generic.Semantics.Elaboration.LetCounter.html#1434" class="Bound">v</a>
  <a id="1459" href="Generic.Semantics.html#835" class="Field">Semantics.alg</a>    <a id="1476" href="Generic.Semantics.Elaboration.LetCounter.html#1281" class="Function">LetCount</a> <a id="1485" class="Symbol">=</a> <a id="1487" class="Symbol">λ</a> <a id="1489" class="Keyword">where</a>
    <a id="1499" class="Symbol">(</a><a id="1500" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="1505" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1507" href="Generic.Semantics.Elaboration.LetCounter.html#1507" class="Bound">t</a><a id="1508" class="Symbol">)</a> <a id="1510" class="Symbol">→</a> <a id="1512" href="Data.Product.html#2369" class="Function">map₁</a> <a id="1517" class="Symbol">(</a><a id="1518" href="Generic.Syntax.html#1338" class="InductiveConstructor">`con</a> <a id="1523" href="Function.html#994" class="Function Operator">∘′</a> <a id="1526" class="Symbol">(</a><a id="1527" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="1532" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,_</a><a id="1534" class="Symbol">))</a> <a id="1537" class="Symbol">(</a><a id="1538" href="Generic.Semantics.Elaboration.LetCounter.html#881" class="Function">count</a> <a id="1544" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="1546" href="Generic.Semantics.Elaboration.LetCounter.html#1507" class="Bound">t</a><a id="1547" class="Symbol">)</a>
    <a id="1553" class="Symbol">(</a><a id="1554" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="1560" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1562" href="Generic.Semantics.Elaboration.LetCounter.html#1562" class="Bound">στ</a> <a id="1565" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1567" class="Symbol">(</a><a id="1568" href="Generic.Semantics.Elaboration.LetCounter.html#1568" class="Bound">e</a> <a id="1570" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1572" href="Generic.Semantics.Elaboration.LetCounter.html#1572" class="Bound">ce</a><a id="1574" class="Symbol">)</a> <a id="1576" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1578" href="Generic.Semantics.Elaboration.LetCounter.html#1578" class="Bound">tct</a> <a id="1582" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1584" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="1588" class="Symbol">)</a> <a id="1590" class="Symbol">→</a>
      <a id="1598" class="Keyword">let</a> <a id="1602" class="Symbol">(</a><a id="1603" href="Generic.Semantics.Elaboration.LetCounter.html#1603" class="Bound">t</a> <a id="1605" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1607" href="Generic.Semantics.Elaboration.LetCounter.html#1607" class="Bound">ct</a><a id="1609" class="Symbol">)</a> <a id="1611" class="Symbol">=</a> <a id="1613" href="Generic.Semantics.Elaboration.LetCounter.html#1578" class="Bound">tct</a> <a id="1617" href="Data.Environment.html#2322" class="Function">extend</a> <a id="1624" class="Symbol">(</a><a id="1625" href="Data.Environment.html#647" class="Function">ε</a> <a id="1627" href="Data.Environment.html#2062" class="Function Operator">∙</a> <a id="1629" href="Data.Var.html#640" class="InductiveConstructor">z</a><a id="1630" class="Symbol">)</a>
          <a id="1642" href="Generic.Semantics.Elaboration.LetCounter.html#1642" class="Bound">e-usage</a>  <a id="1651" class="Symbol">=</a> <a id="1653" href="Data.List.Relation.Unary.All.html#1194" class="Function">All.head</a> <a id="1662" href="Generic.Semantics.Elaboration.LetCounter.html#1607" class="Bound">ct</a>
      <a id="1671" class="Keyword">in</a> <a id="1674" href="Generic.Syntax.html#1338" class="InductiveConstructor">`con</a> <a id="1679" class="Symbol">(</a><a id="1680" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="1686" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1688" href="Generic.Semantics.Elaboration.LetCounter.html#1642" class="Bound">e-usage</a> <a id="1696" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1698" href="Generic.Semantics.Elaboration.LetCounter.html#1562" class="Bound">στ</a> <a id="1701" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1703" href="Generic.Semantics.Elaboration.LetCounter.html#1568" class="Bound">e</a> <a id="1705" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1707" href="Generic.Semantics.Elaboration.LetCounter.html#1603" class="Bound">t</a> <a id="1709" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1711" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="1715" class="Symbol">)</a>
       <a id="1724" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1726" class="Comment">-- if e (the let-bound expression) is not used in t (the body of the let)</a>
         <a id="1809" class="Comment">-- we can ignore its contribution to the count:</a>
         <a id="1866" class="Symbol">(</a><a id="1867" href="Function.html#3533" class="Function Operator">case</a> <a id="1872" href="Generic.Semantics.Elaboration.LetCounter.html#1642" class="Bound">e-usage</a> <a id="1880" href="Function.html#3533" class="Function Operator">of</a> <a id="1883" class="Symbol">λ</a> <a id="1885" class="Keyword">where</a>
           <a id="1902" href="Generic.Syntax.LetCounter.html#407" class="InductiveConstructor">zero</a> <a id="1907" class="Symbol">→</a> <a id="1909" href="Data.List.Relation.Unary.All.html#1295" class="Function">All.tail</a> <a id="1918" href="Generic.Semantics.Elaboration.LetCounter.html#1607" class="Bound">ct</a>
           <a id="1932" class="CatchallClause Symbol">_</a>    <a id="1937" class="Symbol">→</a> <a id="1939" href="Generic.Syntax.LetCounter.html#775" class="Function">merge</a> <a id="1945" href="Generic.Semantics.Elaboration.LetCounter.html#1572" class="Bound">ce</a> <a id="1948" class="Symbol">(</a><a id="1949" href="Data.List.Relation.Unary.All.html#1295" class="Function">All.tail</a> <a id="1958" href="Generic.Semantics.Elaboration.LetCounter.html#1607" class="Bound">ct</a><a id="1960" class="Symbol">))</a>

  <a id="1966" href="Generic.Semantics.Elaboration.LetCounter.html#1966" class="Function">annotate</a> <a id="1975" class="Symbol">:</a> <a id="1977" class="Symbol">∀</a> <a id="1979" class="Symbol">{</a><a id="1980" href="Generic.Semantics.Elaboration.LetCounter.html#1980" class="Bound">σ</a> <a id="1982" href="Generic.Semantics.Elaboration.LetCounter.html#1982" class="Bound">Γ</a><a id="1983" class="Symbol">}</a> <a id="1985" class="Symbol">→</a> <a id="1987" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="1990" class="Symbol">(</a><a id="1991" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="1993" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="1996" href="Generic.Syntax.LetBinder.html#385" class="Function">LetBinder.Let</a><a id="2009" class="Symbol">)</a> <a id="2011" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2013" href="Generic.Semantics.Elaboration.LetCounter.html#1980" class="Bound">σ</a> <a id="2015" href="Generic.Semantics.Elaboration.LetCounter.html#1982" class="Bound">Γ</a> <a id="2017" class="Symbol">→</a> <a id="2019" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="2022" class="Symbol">(</a><a id="2023" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2025" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2028" href="Generic.Syntax.LetCounter.html#1089" class="Function">LetCounter.Let</a><a id="2042" class="Symbol">)</a> <a id="2044" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2046" href="Generic.Semantics.Elaboration.LetCounter.html#1980" class="Bound">σ</a> <a id="2048" href="Generic.Semantics.Elaboration.LetCounter.html#1982" class="Bound">Γ</a>
  <a id="2052" href="Generic.Semantics.Elaboration.LetCounter.html#1966" class="Function">annotate</a> <a id="2061" class="Symbol">=</a> <a id="2063" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="2069" href="Function.html#994" class="Function Operator">∘′</a> <a id="2072" href="Generic.Semantics.html#875" class="Function">Semantics.semantics</a> <a id="2092" href="Generic.Semantics.Elaboration.LetCounter.html#1281" class="Function">LetCount</a> <a id="2101" class="Symbol">(</a><a id="2102" href="Data.Var.Varlike.html#620" class="Function">base</a> <a id="2107" href="Data.Var.Varlike.html#992" class="Function">vl^Var</a><a id="2113" class="Symbol">)</a>

  <a id="2118" href="Generic.Semantics.Elaboration.LetCounter.html#2118" class="Function">Inline</a> <a id="2125" class="Symbol">:</a> <a id="2127" href="Generic.Semantics.html#718" class="Record">Semantics</a> <a id="2137" class="Symbol">(</a><a id="2138" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2140" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2143" href="Generic.Syntax.LetCounter.html#1089" class="Function">LetCounter.Let</a><a id="2157" class="Symbol">)</a> <a id="2159" class="Symbol">(</a><a id="2160" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="2163" class="Symbol">(</a><a id="2164" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2166" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2169" href="Generic.Syntax.LetBinder.html#385" class="Function">LetBinder.Let</a><a id="2182" class="Symbol">)</a> <a id="2184" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="2185" class="Symbol">)</a>
                                     <a id="2224" class="Symbol">(</a><a id="2225" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="2228" class="Symbol">(</a><a id="2229" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2231" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2234" href="Generic.Syntax.LetBinder.html#385" class="Function">LetBinder.Let</a><a id="2247" class="Symbol">)</a> <a id="2249" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="2250" class="Symbol">)</a>
  <a id="2254" href="Generic.Semantics.html#783" class="Field">Semantics.th^𝓥</a> <a id="2269" href="Generic.Semantics.Elaboration.LetCounter.html#2118" class="Function">Inline</a> <a id="2276" class="Symbol">=</a> <a id="2278" href="Generic.Semantics.Syntactic.html#670" class="Function">th^Tm</a>
  <a id="2286" href="Generic.Semantics.html#810" class="Field">Semantics.var</a>   <a id="2302" href="Generic.Semantics.Elaboration.LetCounter.html#2118" class="Function">Inline</a> <a id="2309" class="Symbol">=</a> <a id="2311" href="Function.html#1104" class="Function">id</a>
  <a id="2316" href="Generic.Semantics.html#835" class="Field">Semantics.alg</a>   <a id="2332" href="Generic.Semantics.Elaboration.LetCounter.html#2118" class="Function">Inline</a> <a id="2339" class="Symbol">=</a> <a id="2341" class="Symbol">λ</a> <a id="2343" class="Keyword">where</a>
    <a id="2353" class="Symbol">(</a><a id="2354" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="2359" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2361" href="Generic.Semantics.Elaboration.LetCounter.html#2361" class="Bound">t</a><a id="2362" class="Symbol">)</a>                       <a id="2386" class="Symbol">→</a> <a id="2388" href="Generic.Syntax.html#1338" class="InductiveConstructor">`con</a> <a id="2393" class="Symbol">(</a><a id="2394" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="2399" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2401" href="Generic.Syntax.html#3102" class="Function">fmap</a> <a id="2406" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2408" class="Symbol">(</a><a id="2409" href="Data.Var.Varlike.html#1200" class="Function">reify</a> <a id="2415" href="Generic.Semantics.Syntactic.html#741" class="Function">vl^Tm</a><a id="2420" class="Symbol">)</a> <a id="2422" href="Generic.Semantics.Elaboration.LetCounter.html#2361" class="Bound">t</a><a id="2423" class="Symbol">)</a>
    <a id="2429" class="Symbol">(</a><a id="2430" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="2436" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2438" href="Generic.Syntax.LetCounter.html#441" class="InductiveConstructor">many</a> <a id="2443" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2445" href="Generic.Semantics.Elaboration.LetCounter.html#2445" class="Bound">στ</a> <a id="2448" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2450" href="Generic.Semantics.Elaboration.LetCounter.html#2450" class="Bound">e</a> <a id="2452" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2454" href="Generic.Semantics.Elaboration.LetCounter.html#2454" class="Bound">b</a> <a id="2456" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2458" href="Generic.Semantics.Elaboration.LetCounter.html#2458" class="Bound">eq</a><a id="2460" class="Symbol">)</a> <a id="2462" class="Symbol">→</a> <a id="2464" href="Generic.Syntax.html#1338" class="InductiveConstructor">`con</a> <a id="2469" class="Symbol">(</a><a id="2470" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="2476" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2478" href="Generic.Semantics.Elaboration.LetCounter.html#2445" class="Bound">στ</a> <a id="2481" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2483" href="Generic.Semantics.Elaboration.LetCounter.html#2450" class="Bound">e</a> <a id="2485" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2487" href="Generic.Semantics.Elaboration.LetCounter.html#2454" class="Bound">b</a> <a id="2489" href="Data.Environment.html#2322" class="Function">extend</a> <a id="2496" class="Symbol">(</a><a id="2497" href="Data.Environment.html#647" class="Function">ε</a> <a id="2499" href="Data.Environment.html#2062" class="Function Operator">∙</a> <a id="2501" href="Generic.Syntax.html#1281" class="InductiveConstructor">`var</a> <a id="2506" href="Data.Var.html#640" class="InductiveConstructor">z</a><a id="2507" class="Symbol">)</a> <a id="2509" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2511" href="Generic.Semantics.Elaboration.LetCounter.html#2458" class="Bound">eq</a><a id="2513" class="Symbol">)</a>
    <a id="2519" class="CatchallClause Symbol">(</a><a id="2520" href="Agda.Builtin.Bool.html#154" class="CatchallClause InductiveConstructor">false</a><a id="2525" class="CatchallClause"> </a><a id="2526" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2527" class="CatchallClause"> </a><a id="2528" class="CatchallClause Symbol">_</a><a id="2529" class="CatchallClause"> </a><a id="2530" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2531" class="CatchallClause"> </a><a id="2532" href="Generic.Semantics.Elaboration.LetCounter.html#2532" class="CatchallClause Bound">στ</a><a id="2534" class="CatchallClause"> </a><a id="2535" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2536" class="CatchallClause"> </a><a id="2537" href="Generic.Semantics.Elaboration.LetCounter.html#2537" class="CatchallClause Bound">e</a><a id="2538" class="CatchallClause"> </a><a id="2539" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2540" class="CatchallClause"> </a><a id="2541" href="Generic.Semantics.Elaboration.LetCounter.html#2541" class="CatchallClause Bound">b</a><a id="2542" class="CatchallClause"> </a><a id="2543" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2544" class="CatchallClause"> </a><a id="2545" href="Agda.Builtin.Equality.html#182" class="CatchallClause InductiveConstructor">refl</a><a id="2549" class="CatchallClause Symbol">)</a>  <a id="2552" class="Symbol">→</a> <a id="2554" href="Generic.Semantics.Elaboration.LetCounter.html#2541" class="Bound">b</a> <a id="2556" class="Symbol">(</a><a id="2557" href="Data.Var.Varlike.html#620" class="Function">base</a> <a id="2562" href="Data.Var.Varlike.html#992" class="Function">vl^Var</a><a id="2568" class="Symbol">)</a> <a id="2570" class="Symbol">(</a><a id="2571" href="Data.Environment.html#647" class="Function">ε</a> <a id="2573" href="Data.Environment.html#2062" class="Function Operator">∙</a> <a id="2575" href="Generic.Semantics.Elaboration.LetCounter.html#2537" class="Bound">e</a><a id="2576" class="Symbol">)</a>

  <a id="2581" href="Generic.Semantics.Elaboration.LetCounter.html#2581" class="Function">inline</a> <a id="2588" class="Symbol">:</a> <a id="2590" class="Symbol">∀</a> <a id="2592" class="Symbol">{</a><a id="2593" href="Generic.Semantics.Elaboration.LetCounter.html#2593" class="Bound">σ</a> <a id="2595" href="Generic.Semantics.Elaboration.LetCounter.html#2595" class="Bound">Γ</a><a id="2596" class="Symbol">}</a> <a id="2598" class="Symbol">→</a> <a id="2600" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="2603" class="Symbol">(</a><a id="2604" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2606" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2609" href="Generic.Syntax.LetCounter.html#1089" class="Function">LetCounter.Let</a><a id="2623" class="Symbol">)</a> <a id="2625" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2627" href="Generic.Semantics.Elaboration.LetCounter.html#2593" class="Bound">σ</a> <a id="2629" href="Generic.Semantics.Elaboration.LetCounter.html#2595" class="Bound">Γ</a> <a id="2631" class="Symbol">→</a> <a id="2633" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="2636" class="Symbol">(</a><a id="2637" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2639" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2642" href="Generic.Syntax.LetBinder.html#385" class="Function">LetBinder.Let</a><a id="2655" class="Symbol">)</a> <a id="2657" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2659" href="Generic.Semantics.Elaboration.LetCounter.html#2593" class="Bound">σ</a> <a id="2661" href="Generic.Semantics.Elaboration.LetCounter.html#2595" class="Bound">Γ</a>
  <a id="2665" href="Generic.Semantics.Elaboration.LetCounter.html#2581" class="Function">inline</a> <a id="2672" class="Symbol">=</a> <a id="2674" href="Generic.Semantics.html#875" class="Function">Semantics.semantics</a> <a id="2694" href="Generic.Semantics.Elaboration.LetCounter.html#2118" class="Function">Inline</a> <a id="2701" class="Symbol">(</a><a id="2702" href="Data.Var.Varlike.html#620" class="Function">base</a> <a id="2707" href="Generic.Semantics.Syntactic.html#741" class="Function">vl^Tm</a><a id="2712" class="Symbol">)</a>

  <a id="2717" href="Generic.Semantics.Elaboration.LetCounter.html#2717" class="Function">inline-affine</a> <a id="2731" class="Symbol">:</a> <a id="2733" class="Symbol">∀</a> <a id="2735" class="Symbol">{</a><a id="2736" href="Generic.Semantics.Elaboration.LetCounter.html#2736" class="Bound">σ</a> <a id="2738" href="Generic.Semantics.Elaboration.LetCounter.html#2738" class="Bound">Γ</a><a id="2739" class="Symbol">}</a> <a id="2741" class="Symbol">→</a> <a id="2743" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="2746" class="Symbol">(</a><a id="2747" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2749" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2752" href="Generic.Syntax.LetBinder.html#385" class="Function">LetBinder.Let</a><a id="2765" class="Symbol">)</a> <a id="2767" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2769" href="Generic.Semantics.Elaboration.LetCounter.html#2736" class="Bound">σ</a> <a id="2771" href="Generic.Semantics.Elaboration.LetCounter.html#2738" class="Bound">Γ</a> <a id="2773" class="Symbol">→</a> <a id="2775" href="Generic.Syntax.html#1237" class="Datatype">Tm</a> <a id="2778" class="Symbol">(</a><a id="2779" href="Generic.Semantics.Elaboration.LetCounter.html#738" class="Bound">d</a> <a id="2781" href="Generic.Syntax.html#1777" class="Function Operator">`+</a> <a id="2784" href="Generic.Syntax.LetBinder.html#385" class="Function">LetBinder.Let</a><a id="2797" class="Symbol">)</a> <a id="2799" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2801" href="Generic.Semantics.Elaboration.LetCounter.html#2736" class="Bound">σ</a> <a id="2803" href="Generic.Semantics.Elaboration.LetCounter.html#2738" class="Bound">Γ</a>
  <a id="2807" href="Generic.Semantics.Elaboration.LetCounter.html#2717" class="Function">inline-affine</a> <a id="2821" class="Symbol">=</a> <a id="2823" href="Generic.Semantics.Elaboration.LetCounter.html#2581" class="Function">inline</a> <a id="2830" href="Function.html#994" class="Function Operator">∘′</a> <a id="2833" href="Generic.Semantics.Elaboration.LetCounter.html#1966" class="Function">annotate</a>
</pre></body></html>