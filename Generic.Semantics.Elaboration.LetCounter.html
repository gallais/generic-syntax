<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Semantics.Elaboration.LetCounter</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--sized-types</a> <a id="34" class="Symbol">#-}</a>

<a id="39" class="Keyword">open</a> <a id="44" class="Keyword">import</a> <a id="51" href="Generic.Syntax.html" class="Module">Generic.Syntax</a>

<a id="67" class="Keyword">module</a> <a id="74" href="Generic.Semantics.Elaboration.LetCounter.html" class="Module">Generic.Semantics.Elaboration.LetCounter</a> <a id="115" class="Symbol">{</a><a id="116" href="Generic.Semantics.Elaboration.LetCounter.html#116" class="Bound">I</a> <a id="118" class="Symbol">:</a> <a id="120" class="PrimitiveType">Set</a><a id="123" class="Symbol">}</a> <a id="125" class="Symbol">{</a><a id="126" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="128" class="Symbol">:</a> <a id="130" href="Generic.Syntax.html#503" class="Datatype">Desc</a> <a id="135" href="Generic.Semantics.Elaboration.LetCounter.html#116" class="Bound">I</a><a id="136" class="Symbol">}</a> <a id="138" class="Keyword">where</a>

<a id="145" class="Keyword">import</a> <a id="152" href="Level.html" class="Module">Level</a> <a id="158" class="Symbol">as</a> <a id="161" class="Module">L</a>
<a id="163" class="Keyword">open</a> <a id="168" class="Keyword">import</a> <a id="175" href="Size.html" class="Module">Size</a>
<a id="180" class="Keyword">open</a> <a id="185" class="Keyword">import</a> <a id="192" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>
<a id="214" class="Keyword">open</a> <a id="219" class="Keyword">import</a> <a id="226" href="Agda.Builtin.Bool.html" class="Module">Agda.Builtin.Bool</a>
<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Data.Product.html" class="Module">Data.Product</a>
<a id="269" class="Keyword">import</a> <a id="276" href="Data.Product.Categorical.Right.html" class="Module">Data.Product.Categorical.Right</a> <a id="307" class="Symbol">as</a> <a id="310" class="Module">PC</a>
<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="340" class="Keyword">open</a> <a id="345" class="Keyword">import</a> <a id="352" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="381" class="Symbol">as</a> <a id="384" class="Module">All</a> <a id="388" class="Keyword">using</a> <a id="394" class="Symbol">(</a><a id="395" href="Data.List.Relation.Unary.All.html#952" class="Datatype">All</a><a id="398" class="Symbol">)</a>
<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Data.List.Relation.Unary.All.Properties.html" class="Module">Data.List.Relation.Unary.All.Properties</a>
<a id="452" class="Keyword">open</a> <a id="457" class="Keyword">import</a> <a id="464" href="Function.html" class="Module">Function</a>

<a id="474" class="Keyword">open</a> <a id="479" class="Keyword">import</a> <a id="486" href="Data.Var.html" class="Module">Data.Var</a>
<a id="495" class="Keyword">open</a> <a id="500" class="Keyword">import</a> <a id="507" href="Data.Var.Varlike.html" class="Module">Data.Var.Varlike</a>
<a id="524" class="Keyword">open</a> <a id="529" class="Keyword">import</a> <a id="536" href="Data.Environment.html" class="Module">Data.Environment</a> <a id="553" class="Keyword">using</a> <a id="559" class="Symbol">(</a><a id="560" href="Data.Environment.html#3905" class="Function">Kripke</a><a id="566" class="Symbol">;</a> <a id="568" href="Data.Environment.html#3501" class="Function">th^Var</a><a id="574" class="Symbol">;</a> <a id="576" href="Data.Environment.html#694" class="Function">ε</a><a id="577" class="Symbol">;</a> <a id="579" href="Data.Environment.html#2109" class="Function Operator">_∙_</a><a id="582" class="Symbol">;</a> <a id="584" href="Data.Environment.html#2369" class="Function">extend</a><a id="590" class="Symbol">)</a>
<a id="592" class="Keyword">open</a> <a id="597" class="Keyword">import</a> <a id="604" href="Generic.Syntax.LetCounter.html" class="Module">Generic.Syntax.LetCounter</a>
<a id="630" class="Keyword">open</a> <a id="635" class="Keyword">import</a> <a id="642" href="Generic.Syntax.LetBinder.html" class="Module">Generic.Syntax.LetBinder</a>
<a id="667" class="Keyword">open</a> <a id="672" class="Keyword">import</a> <a id="679" href="Generic.Semantics.html" class="Module">Generic.Semantics</a>
<a id="697" class="Keyword">open</a> <a id="702" class="Keyword">import</a> <a id="709" href="Generic.Semantics.Syntactic.html" class="Module">Generic.Semantics.Syntactic</a>

<a id="738" class="Keyword">private</a>
  <a id="748" class="Keyword">variable</a>
    <a id="761" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a> <a id="763" href="Generic.Semantics.Elaboration.LetCounter.html#763" class="Generalizable">Δ</a> <a id="765" class="Symbol">:</a> <a id="767" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="772" href="Generic.Semantics.Elaboration.LetCounter.html#116" class="Bound">I</a>
    <a id="778" href="Generic.Semantics.Elaboration.LetCounter.html#778" class="Generalizable">σ</a> <a id="780" class="Symbol">:</a> <a id="782" href="Generic.Semantics.Elaboration.LetCounter.html#116" class="Bound">I</a>

<a id="785" class="Keyword">module</a> <a id="PCR"></a><a id="792" href="Generic.Semantics.Elaboration.LetCounter.html#792" class="Module">PCR</a> <a id="796" class="Symbol">{</a><a id="797" href="Generic.Semantics.Elaboration.LetCounter.html#797" class="Bound">Γ</a> <a id="799" class="Symbol">:</a> <a id="801" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="806" href="Generic.Semantics.Elaboration.LetCounter.html#116" class="Bound">I</a><a id="807" class="Symbol">}</a> <a id="809" class="Symbol">=</a> <a id="811" href="Data.Product.Categorical.Right.html" class="Module">PC</a> <a id="814" href="Agda.Primitive.html#611" class="Primitive">L.zero</a> <a id="821" class="Symbol">(</a><a id="822" href="Generic.Syntax.LetCounter.html#896" class="Function">rawMonoid</a> <a id="832" href="Generic.Semantics.Elaboration.LetCounter.html#797" class="Bound">Γ</a><a id="833" class="Symbol">)</a>
<a id="835" class="Keyword">instance</a> <a id="844" href="Generic.Semantics.Elaboration.LetCounter.html#844" class="Function">_</a> <a id="846" class="Symbol">=</a> <a id="848" href="Data.Product.Categorical.Right.html#1184" class="Function">PCR.applicative</a>

<a id="Counted"></a><a id="865" href="Generic.Semantics.Elaboration.LetCounter.html#865" class="Function">Counted</a> <a id="873" class="Symbol">:</a> <a id="875" href="Generic.Semantics.Elaboration.LetCounter.html#116" class="Bound">I</a> <a id="877" href="Data.Var.html#511" class="Function Operator">─Scoped</a> <a id="885" class="Symbol">→</a> <a id="887" href="Generic.Semantics.Elaboration.LetCounter.html#116" class="Bound">I</a> <a id="889" href="Data.Var.html#511" class="Function Operator">─Scoped</a>
<a id="897" href="Generic.Semantics.Elaboration.LetCounter.html#865" class="Function">Counted</a> <a id="905" href="Generic.Semantics.Elaboration.LetCounter.html#905" class="Bound">T</a> <a id="907" href="Generic.Semantics.Elaboration.LetCounter.html#907" class="Bound">i</a> <a id="909" href="Generic.Semantics.Elaboration.LetCounter.html#909" class="Bound">Γ</a> <a id="911" class="Symbol">=</a> <a id="913" href="Generic.Semantics.Elaboration.LetCounter.html#905" class="Bound">T</a> <a id="915" href="Generic.Semantics.Elaboration.LetCounter.html#907" class="Bound">i</a> <a id="917" href="Generic.Semantics.Elaboration.LetCounter.html#909" class="Bound">Γ</a> <a id="919" href="Data.Product.html#1389" class="Function Operator">×</a> <a id="921" href="Generic.Syntax.LetCounter.html#566" class="Function">Count</a> <a id="927" href="Generic.Semantics.Elaboration.LetCounter.html#909" class="Bound">Γ</a>

<a id="reify^Count"></a><a id="930" href="Generic.Semantics.Elaboration.LetCounter.html#930" class="Function">reify^Count</a> <a id="942" class="Symbol">:</a>  <a id="945" class="Symbol">∀</a> <a id="947" href="Generic.Semantics.Elaboration.LetCounter.html#947" class="Bound">Δ</a> <a id="949" href="Generic.Semantics.Elaboration.LetCounter.html#949" class="Bound">σ</a> <a id="951" class="Symbol">→</a>
  <a id="955" href="Data.Environment.html#3905" class="Function">Kripke</a> <a id="962" href="Data.Var.html#616" class="Datatype">Var</a> <a id="966" class="Symbol">(</a><a id="967" href="Generic.Semantics.Elaboration.LetCounter.html#865" class="Function">Counted</a> <a id="975" class="Symbol">(</a><a id="976" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="979" class="Symbol">(</a><a id="980" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="982" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="985" href="Generic.Syntax.LetCounter.html#1093" class="Function">CLet</a><a id="989" class="Symbol">)</a> <a id="991" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="992" class="Symbol">))</a> <a id="995" href="Generic.Semantics.Elaboration.LetCounter.html#947" class="Bound">Δ</a> <a id="997" href="Generic.Semantics.Elaboration.LetCounter.html#949" class="Bound">σ</a> <a id="999" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a> <a id="1001" class="Symbol">→</a>
  <a id="1005" href="Generic.Semantics.Elaboration.LetCounter.html#865" class="Function">Counted</a> <a id="1013" class="Symbol">(</a><a id="1014" href="Generic.Syntax.html#1193" class="Function">Scope</a> <a id="1020" class="Symbol">(</a><a id="1021" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="1024" class="Symbol">(</a><a id="1025" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1027" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1030" href="Generic.Syntax.LetCounter.html#1093" class="Function">CLet</a><a id="1034" class="Symbol">)</a> <a id="1036" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="1037" class="Symbol">)</a> <a id="1039" href="Generic.Semantics.Elaboration.LetCounter.html#947" class="Bound">Δ</a><a id="1040" class="Symbol">)</a> <a id="1042" href="Generic.Semantics.Elaboration.LetCounter.html#949" class="Bound">σ</a> <a id="1044" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a>
<a id="1046" href="Generic.Semantics.Elaboration.LetCounter.html#930" class="Function">reify^Count</a> <a id="1058" href="Generic.Semantics.Elaboration.LetCounter.html#1058" class="Bound">Δ</a> <a id="1060" href="Generic.Semantics.Elaboration.LetCounter.html#1060" class="Bound">σ</a> <a id="1062" href="Generic.Semantics.Elaboration.LetCounter.html#1062" class="Bound">kr</a> <a id="1065" class="Symbol">=</a>  <a id="1068" class="Keyword">let</a> <a id="1072" class="Symbol">(</a><a id="1073" href="Generic.Semantics.Elaboration.LetCounter.html#1073" class="Bound">scp</a> <a id="1077" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1079" href="Generic.Semantics.Elaboration.LetCounter.html#1079" class="Bound">c</a><a id="1080" class="Symbol">)</a> <a id="1082" class="Symbol">=</a> <a id="1084" href="Data.Var.Varlike.html#1200" class="Function">reify</a> <a id="1090" href="Data.Var.Varlike.html#992" class="Function">vl^Var</a> <a id="1097" href="Generic.Semantics.Elaboration.LetCounter.html#1058" class="Bound">Δ</a> <a id="1099" href="Generic.Semantics.Elaboration.LetCounter.html#1060" class="Bound">σ</a> <a id="1101" href="Generic.Semantics.Elaboration.LetCounter.html#1062" class="Bound">kr</a> <a id="1104" class="Keyword">in</a>
                      <a id="1129" href="Generic.Semantics.Elaboration.LetCounter.html#1073" class="Bound">scp</a> <a id="1133" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1135" href="Data.List.Relation.Unary.All.Properties.html#8110" class="Function">++⁻ʳ</a> <a id="1140" href="Generic.Semantics.Elaboration.LetCounter.html#1058" class="Bound">Δ</a> <a id="1142" href="Generic.Semantics.Elaboration.LetCounter.html#1079" class="Bound">c</a>

<a id="LetCount"></a><a id="1145" href="Generic.Semantics.Elaboration.LetCounter.html#1145" class="Function">LetCount</a> <a id="1154" class="Symbol">:</a> <a id="1156" href="Generic.Semantics.html#780" class="Record">Semantics</a> <a id="1166" class="Symbol">(</a><a id="1167" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1169" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1172" href="Generic.Syntax.LetBinder.html#385" class="Function">Let</a><a id="1175" class="Symbol">)</a> <a id="1177" href="Data.Var.html#616" class="Datatype">Var</a> <a id="1181" class="Symbol">(</a><a id="1182" href="Generic.Semantics.Elaboration.LetCounter.html#865" class="Function">Counted</a> <a id="1190" class="Symbol">(</a><a id="1191" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="1194" class="Symbol">(</a><a id="1195" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1197" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1200" href="Generic.Syntax.LetCounter.html#1093" class="Function">CLet</a><a id="1204" class="Symbol">)</a> <a id="1206" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="1207" class="Symbol">))</a>
<a id="1210" href="Generic.Semantics.html#845" class="Field">Semantics.th^𝓥</a>  <a id="1226" href="Generic.Semantics.Elaboration.LetCounter.html#1145" class="Function">LetCount</a> <a id="1235" class="Symbol">=</a> <a id="1237" href="Data.Environment.html#3501" class="Function">th^Var</a>
<a id="1244" href="Generic.Semantics.html#872" class="Field">Semantics.var</a>    <a id="1261" href="Generic.Semantics.Elaboration.LetCounter.html#1145" class="Function">LetCount</a> <a id="1270" class="Symbol">=</a> <a id="1272" class="Symbol">λ</a> <a id="1274" href="Generic.Semantics.Elaboration.LetCounter.html#1274" class="Bound">v</a> <a id="1276" class="Symbol">→</a> <a id="1278" href="Generic.Syntax.html#1337" class="InductiveConstructor">`var</a> <a id="1283" href="Generic.Semantics.Elaboration.LetCounter.html#1274" class="Bound">v</a> <a id="1285" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1287" href="Generic.Syntax.LetCounter.html#674" class="Function">fromVar</a> <a id="1295" href="Generic.Semantics.Elaboration.LetCounter.html#1274" class="Bound">v</a>
<a id="1297" href="Generic.Semantics.html#897" class="Field">Semantics.alg</a>    <a id="1314" href="Generic.Semantics.Elaboration.LetCounter.html#1145" class="Function">LetCount</a> <a id="1323" class="Symbol">=</a> <a id="1325" class="Symbol">λ</a> <a id="1327" class="Keyword">where</a>
  <a id="1335" class="Symbol">(</a><a id="1336" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="1341" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1343" href="Generic.Semantics.Elaboration.LetCounter.html#1343" class="Bound">t</a><a id="1344" class="Symbol">)</a> <a id="1346" class="Symbol">→</a> <a id="1348" href="Data.Product.html#2369" class="Function">map₁</a> <a id="1353" class="Symbol">(</a><a id="1354" href="Generic.Syntax.html#1394" class="InductiveConstructor">`con</a> <a id="1359" href="Function.html#994" class="Function Operator">∘′</a> <a id="1362" class="Symbol">(</a><a id="1363" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="1368" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,_</a><a id="1370" class="Symbol">))</a> <a id="1373" class="Symbol">(</a><a id="1374" href="Generic.Syntax.html#4870" class="Function">mapA</a> <a id="1379" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1381" href="Generic.Semantics.Elaboration.LetCounter.html#930" class="Function">reify^Count</a> <a id="1393" href="Generic.Semantics.Elaboration.LetCounter.html#1343" class="Bound">t</a><a id="1394" class="Symbol">)</a>
  <a id="1398" class="Symbol">(</a><a id="1399" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="1405" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1407" href="Generic.Semantics.Elaboration.LetCounter.html#1407" class="Bound">στ</a> <a id="1410" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1412" class="Symbol">(</a><a id="1413" href="Generic.Semantics.Elaboration.LetCounter.html#1413" class="Bound">e</a> <a id="1415" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1417" href="Generic.Semantics.Elaboration.LetCounter.html#1417" class="Bound">ce</a><a id="1419" class="Symbol">)</a> <a id="1421" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1423" href="Generic.Semantics.Elaboration.LetCounter.html#1423" class="Bound">tct</a> <a id="1427" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1429" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="1433" class="Symbol">)</a> <a id="1435" class="Symbol">→</a>
    <a id="1441" class="Keyword">let</a> <a id="1445" class="Symbol">(</a><a id="1446" href="Generic.Semantics.Elaboration.LetCounter.html#1446" class="Bound">t</a> <a id="1448" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1450" href="Generic.Semantics.Elaboration.LetCounter.html#1450" class="Bound">ct</a><a id="1452" class="Symbol">)</a> <a id="1454" class="Symbol">=</a> <a id="1456" href="Generic.Semantics.Elaboration.LetCounter.html#1423" class="Bound">tct</a> <a id="1460" href="Data.Environment.html#2369" class="Function">extend</a> <a id="1467" class="Symbol">(</a><a id="1468" href="Data.Environment.html#694" class="Function">ε</a> <a id="1470" href="Data.Environment.html#2109" class="Function Operator">∙</a> <a id="1472" href="Data.Var.html#640" class="InductiveConstructor">z</a><a id="1473" class="Symbol">)</a>
        <a id="1483" href="Generic.Semantics.Elaboration.LetCounter.html#1483" class="Bound">e-usage</a>  <a id="1492" class="Symbol">=</a> <a id="1494" href="Data.List.Relation.Unary.All.html#1194" class="Function">All.head</a> <a id="1503" href="Generic.Semantics.Elaboration.LetCounter.html#1450" class="Bound">ct</a>
    <a id="1510" class="Keyword">in</a> <a id="1513" href="Generic.Syntax.html#1394" class="InductiveConstructor">`con</a> <a id="1518" class="Symbol">(</a><a id="1519" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="1525" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1527" href="Generic.Semantics.Elaboration.LetCounter.html#1483" class="Bound">e-usage</a> <a id="1535" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1537" href="Generic.Semantics.Elaboration.LetCounter.html#1407" class="Bound">στ</a> <a id="1540" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1542" href="Generic.Semantics.Elaboration.LetCounter.html#1413" class="Bound">e</a> <a id="1544" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1546" href="Generic.Semantics.Elaboration.LetCounter.html#1446" class="Bound">t</a> <a id="1548" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1550" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="1554" class="Symbol">)</a>
     <a id="1561" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1563" class="Comment">-- if e (the let-bound expression) is not used in t (the body of the let)</a>
       <a id="1644" class="Comment">-- we can ignore its contribution to the count:</a>
       <a id="1699" class="Symbol">(</a><a id="1700" href="Function.html#3533" class="Function Operator">case</a> <a id="1705" href="Generic.Semantics.Elaboration.LetCounter.html#1483" class="Bound">e-usage</a> <a id="1713" href="Function.html#3533" class="Function Operator">of</a> <a id="1716" class="Symbol">λ</a> <a id="1718" class="Keyword">where</a>
         <a id="1733" href="Generic.Syntax.LetCounter.html#411" class="InductiveConstructor">zero</a> <a id="1738" class="Symbol">→</a> <a id="1740" href="Data.List.Relation.Unary.All.html#1295" class="Function">All.tail</a> <a id="1749" href="Generic.Semantics.Elaboration.LetCounter.html#1450" class="Bound">ct</a>
         <a id="1761" class="CatchallClause Symbol">_</a>    <a id="1766" class="Symbol">→</a> <a id="1768" href="Generic.Syntax.LetCounter.html#779" class="Function">merge</a> <a id="1774" href="Generic.Semantics.Elaboration.LetCounter.html#1417" class="Bound">ce</a> <a id="1777" class="Symbol">(</a><a id="1778" href="Data.List.Relation.Unary.All.html#1295" class="Function">All.tail</a> <a id="1787" href="Generic.Semantics.Elaboration.LetCounter.html#1450" class="Bound">ct</a><a id="1789" class="Symbol">))</a>

<a id="annotate"></a><a id="1793" href="Generic.Semantics.Elaboration.LetCounter.html#1793" class="Function">annotate</a> <a id="1802" class="Symbol">:</a> <a id="1804" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="1807" class="Symbol">(</a><a id="1808" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1810" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1813" href="Generic.Syntax.LetBinder.html#385" class="Function">Let</a><a id="1816" class="Symbol">)</a> <a id="1818" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="1820" href="Generic.Semantics.Elaboration.LetCounter.html#778" class="Generalizable">σ</a> <a id="1822" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a> <a id="1824" class="Symbol">→</a> <a id="1826" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="1829" class="Symbol">(</a><a id="1830" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1832" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1835" href="Generic.Syntax.LetCounter.html#1093" class="Function">CLet</a><a id="1839" class="Symbol">)</a> <a id="1841" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="1843" href="Generic.Semantics.Elaboration.LetCounter.html#778" class="Generalizable">σ</a> <a id="1845" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a>
<a id="1847" href="Generic.Semantics.Elaboration.LetCounter.html#1793" class="Function">annotate</a> <a id="1856" class="Symbol">=</a> <a id="1858" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="1864" href="Function.html#994" class="Function Operator">∘′</a> <a id="1867" href="Generic.Semantics.html#937" class="Function">Semantics.semantics</a> <a id="1887" href="Generic.Semantics.Elaboration.LetCounter.html#1145" class="Function">LetCount</a> <a id="1896" class="Symbol">(</a><a id="1897" href="Data.Var.Varlike.html#620" class="Function">base</a> <a id="1902" href="Data.Var.Varlike.html#992" class="Function">vl^Var</a><a id="1908" class="Symbol">)</a>

<a id="Inline"></a><a id="1911" href="Generic.Semantics.Elaboration.LetCounter.html#1911" class="Function">Inline</a> <a id="1918" class="Symbol">:</a> <a id="1920" href="Generic.Semantics.html#780" class="Record">Semantics</a> <a id="1930" class="Symbol">(</a><a id="1931" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1933" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1936" href="Generic.Syntax.LetCounter.html#1093" class="Function">CLet</a><a id="1940" class="Symbol">)</a> <a id="1942" class="Symbol">(</a><a id="1943" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="1946" class="Symbol">(</a><a id="1947" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1949" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1952" href="Generic.Syntax.LetBinder.html#385" class="Function">Let</a><a id="1955" class="Symbol">)</a> <a id="1957" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="1958" class="Symbol">)</a> <a id="1960" class="Symbol">(</a><a id="1961" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="1964" class="Symbol">(</a><a id="1965" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="1967" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="1970" href="Generic.Syntax.LetBinder.html#385" class="Function">Let</a><a id="1973" class="Symbol">)</a> <a id="1975" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="1976" class="Symbol">)</a>
<a id="1978" href="Generic.Semantics.html#845" class="Field">Semantics.th^𝓥</a> <a id="1993" href="Generic.Semantics.Elaboration.LetCounter.html#1911" class="Function">Inline</a> <a id="2000" class="Symbol">=</a> <a id="2002" href="Generic.Semantics.Syntactic.html#670" class="Function">th^Tm</a>
<a id="2008" href="Generic.Semantics.html#872" class="Field">Semantics.var</a>   <a id="2024" href="Generic.Semantics.Elaboration.LetCounter.html#1911" class="Function">Inline</a> <a id="2031" class="Symbol">=</a> <a id="2033" href="Function.html#1104" class="Function">id</a>
<a id="2036" href="Generic.Semantics.html#897" class="Field">Semantics.alg</a>   <a id="2052" href="Generic.Semantics.Elaboration.LetCounter.html#1911" class="Function">Inline</a> <a id="2059" class="Symbol">=</a> <a id="2061" class="Symbol">λ</a> <a id="2063" class="Keyword">where</a>
  <a id="2071" class="Symbol">(</a><a id="2072" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="2077" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2079" href="Generic.Semantics.Elaboration.LetCounter.html#2079" class="Bound">t</a><a id="2080" class="Symbol">)</a>                       <a id="2104" class="Symbol">→</a> <a id="2106" href="Generic.Syntax.html#1394" class="InductiveConstructor">`con</a> <a id="2111" class="Symbol">(</a><a id="2112" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a> <a id="2117" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2119" href="Generic.Syntax.html#3158" class="Function">fmap</a> <a id="2124" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="2126" class="Symbol">(</a><a id="2127" href="Data.Var.Varlike.html#1200" class="Function">reify</a> <a id="2133" href="Generic.Semantics.Syntactic.html#741" class="Function">vl^Tm</a><a id="2138" class="Symbol">)</a> <a id="2140" href="Generic.Semantics.Elaboration.LetCounter.html#2079" class="Bound">t</a><a id="2141" class="Symbol">)</a>
  <a id="2145" class="Symbol">(</a><a id="2146" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="2152" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2154" href="Generic.Syntax.LetCounter.html#445" class="InductiveConstructor">many</a> <a id="2159" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2161" href="Generic.Semantics.Elaboration.LetCounter.html#2161" class="Bound">στ</a> <a id="2164" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2166" href="Generic.Semantics.Elaboration.LetCounter.html#2166" class="Bound">e</a> <a id="2168" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2170" href="Generic.Semantics.Elaboration.LetCounter.html#2170" class="Bound">b</a> <a id="2172" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2174" href="Generic.Semantics.Elaboration.LetCounter.html#2174" class="Bound">eq</a><a id="2176" class="Symbol">)</a> <a id="2178" class="Symbol">→</a> <a id="2180" href="Generic.Syntax.html#1394" class="InductiveConstructor">`con</a> <a id="2185" class="Symbol">(</a><a id="2186" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a> <a id="2192" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2194" href="Generic.Semantics.Elaboration.LetCounter.html#2161" class="Bound">στ</a> <a id="2197" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2199" href="Generic.Semantics.Elaboration.LetCounter.html#2166" class="Bound">e</a> <a id="2201" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2203" href="Generic.Semantics.Elaboration.LetCounter.html#2170" class="Bound">b</a> <a id="2205" href="Data.Environment.html#2369" class="Function">extend</a> <a id="2212" class="Symbol">(</a><a id="2213" href="Data.Environment.html#694" class="Function">ε</a> <a id="2215" href="Data.Environment.html#2109" class="Function Operator">∙</a> <a id="2217" href="Generic.Syntax.html#1337" class="InductiveConstructor">`var</a> <a id="2222" href="Data.Var.html#640" class="InductiveConstructor">z</a><a id="2223" class="Symbol">)</a> <a id="2225" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2227" href="Generic.Semantics.Elaboration.LetCounter.html#2174" class="Bound">eq</a><a id="2229" class="Symbol">)</a>
  <a id="2233" class="CatchallClause Symbol">(</a><a id="2234" href="Agda.Builtin.Bool.html#154" class="CatchallClause InductiveConstructor">false</a><a id="2239" class="CatchallClause"> </a><a id="2240" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2241" class="CatchallClause"> </a><a id="2242" class="CatchallClause Symbol">_</a><a id="2243" class="CatchallClause"> </a><a id="2244" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2245" class="CatchallClause"> </a><a id="2246" href="Generic.Semantics.Elaboration.LetCounter.html#2246" class="CatchallClause Bound">στ</a><a id="2248" class="CatchallClause"> </a><a id="2249" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2250" class="CatchallClause"> </a><a id="2251" href="Generic.Semantics.Elaboration.LetCounter.html#2251" class="CatchallClause Bound">e</a><a id="2252" class="CatchallClause"> </a><a id="2253" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2254" class="CatchallClause"> </a><a id="2255" href="Generic.Semantics.Elaboration.LetCounter.html#2255" class="CatchallClause Bound">b</a><a id="2256" class="CatchallClause"> </a><a id="2257" href="Agda.Builtin.Sigma.html#209" class="CatchallClause InductiveConstructor Operator">,</a><a id="2258" class="CatchallClause"> </a><a id="2259" href="Agda.Builtin.Equality.html#182" class="CatchallClause InductiveConstructor">refl</a><a id="2263" class="CatchallClause Symbol">)</a>  <a id="2266" class="Symbol">→</a> <a id="2268" href="Generic.Semantics.Elaboration.LetCounter.html#2255" class="Bound">b</a> <a id="2270" class="Symbol">(</a><a id="2271" href="Data.Var.Varlike.html#620" class="Function">base</a> <a id="2276" href="Data.Var.Varlike.html#992" class="Function">vl^Var</a><a id="2282" class="Symbol">)</a> <a id="2284" class="Symbol">(</a><a id="2285" href="Data.Environment.html#694" class="Function">ε</a> <a id="2287" href="Data.Environment.html#2109" class="Function Operator">∙</a> <a id="2289" href="Generic.Semantics.Elaboration.LetCounter.html#2251" class="Bound">e</a><a id="2290" class="Symbol">)</a>

<a id="inline"></a><a id="2293" href="Generic.Semantics.Elaboration.LetCounter.html#2293" class="Function">inline</a> <a id="2300" class="Symbol">:</a> <a id="2302" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="2305" class="Symbol">(</a><a id="2306" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="2308" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="2311" href="Generic.Syntax.LetCounter.html#1093" class="Function">CLet</a><a id="2315" class="Symbol">)</a> <a id="2317" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2319" href="Generic.Semantics.Elaboration.LetCounter.html#778" class="Generalizable">σ</a> <a id="2321" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a> <a id="2323" class="Symbol">→</a> <a id="2325" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="2328" class="Symbol">(</a><a id="2329" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="2331" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="2334" href="Generic.Syntax.LetBinder.html#385" class="Function">Let</a><a id="2337" class="Symbol">)</a> <a id="2339" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2341" href="Generic.Semantics.Elaboration.LetCounter.html#778" class="Generalizable">σ</a> <a id="2343" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a>
<a id="2345" href="Generic.Semantics.Elaboration.LetCounter.html#2293" class="Function">inline</a> <a id="2352" class="Symbol">=</a> <a id="2354" href="Generic.Semantics.html#937" class="Function">Semantics.semantics</a> <a id="2374" href="Generic.Semantics.Elaboration.LetCounter.html#1911" class="Function">Inline</a> <a id="2381" class="Symbol">(</a><a id="2382" href="Data.Var.Varlike.html#620" class="Function">base</a> <a id="2387" href="Generic.Semantics.Syntactic.html#741" class="Function">vl^Tm</a><a id="2392" class="Symbol">)</a>

<a id="inline-affine"></a><a id="2395" href="Generic.Semantics.Elaboration.LetCounter.html#2395" class="Function">inline-affine</a> <a id="2409" class="Symbol">:</a> <a id="2411" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="2414" class="Symbol">(</a><a id="2415" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="2417" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="2420" href="Generic.Syntax.LetBinder.html#385" class="Function">Let</a><a id="2423" class="Symbol">)</a> <a id="2425" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2427" href="Generic.Semantics.Elaboration.LetCounter.html#778" class="Generalizable">σ</a> <a id="2429" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a> <a id="2431" class="Symbol">→</a> <a id="2433" href="Generic.Syntax.html#1293" class="Datatype">Tm</a> <a id="2436" class="Symbol">(</a><a id="2437" href="Generic.Semantics.Elaboration.LetCounter.html#126" class="Bound">d</a> <a id="2439" href="Generic.Syntax.html#1833" class="Function Operator">`+</a> <a id="2442" href="Generic.Syntax.LetBinder.html#385" class="Function">Let</a><a id="2445" class="Symbol">)</a> <a id="2447" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2449" href="Generic.Semantics.Elaboration.LetCounter.html#778" class="Generalizable">σ</a> <a id="2451" href="Generic.Semantics.Elaboration.LetCounter.html#761" class="Generalizable">Γ</a>
<a id="2453" href="Generic.Semantics.Elaboration.LetCounter.html#2395" class="Function">inline-affine</a> <a id="2467" class="Symbol">=</a> <a id="2469" href="Generic.Semantics.Elaboration.LetCounter.html#2293" class="Function">inline</a> <a id="2476" href="Function.html#994" class="Function Operator">∘′</a> <a id="2479" href="Generic.Semantics.Elaboration.LetCounter.html#1793" class="Function">annotate</a>
</pre></body></html>