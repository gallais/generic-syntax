<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.String.Unsafe</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Unsafe String operations and proofs</a>
<a id="145" class="Comment">------------------------------------------------------------------------</a>

<a id="219" class="Keyword">module</a> <a id="226" href="Data.String.Unsafe.html" class="Module">Data.String.Unsafe</a> <a id="245" class="Keyword">where</a>

<a id="252" class="Keyword">open</a> <a id="257" class="Keyword">import</a> <a id="264" href="Data.String.html" class="Module">Data.String</a>
<a id="276" class="Keyword">open</a> <a id="281" class="Keyword">import</a> <a id="288" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="303" class="Keyword">using</a> <a id="309" class="Symbol">(</a><a id="310" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a><a id="314" class="Symbol">;</a> <a id="316" href="Agda.Builtin.Bool.html#92" class="InductiveConstructor">true</a><a id="320" class="Symbol">;</a> <a id="322" href="Agda.Builtin.Bool.html#86" class="InductiveConstructor">false</a><a id="327" class="Symbol">)</a>
<a id="329" class="Keyword">open</a> <a id="334" class="Keyword">import</a> <a id="341" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="357" class="Keyword">using</a> <a id="363" class="Symbol">(</a><a id="364" href="Relation.Binary.Core.html#4499" class="Function">Decidable</a><a id="373" class="Symbol">;</a> <a id="375" href="Relation.Binary.html#2694" class="Record">DecSetoid</a><a id="384" class="Symbol">)</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="436" class="Symbol">as</a> <a id="439" class="Module">PropEq</a> <a id="446" class="Keyword">using</a> <a id="452" class="Symbol">(</a><a id="453" href="Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a><a id="456" class="Symbol">)</a>
<a id="458" class="Keyword">open</a> <a id="463" class="Keyword">import</a> <a id="470" href="Relation.Binary.PropositionalEquality.TrustMe.html" class="Module">Relation.Binary.PropositionalEquality.TrustMe</a> <a id="516" class="Keyword">using</a> <a id="522" class="Symbol">(</a><a id="523" href="Relation.Binary.PropositionalEquality.TrustMe.html#547" class="Function">trustMe</a><a id="530" class="Symbol">)</a>
<a id="532" class="Keyword">open</a> <a id="537" class="Keyword">import</a> <a id="544" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="561" class="Keyword">using</a> <a id="567" class="Symbol">(</a><a id="568" href="Relation.Nullary.html#570" class="InductiveConstructor">yes</a><a id="571" class="Symbol">;</a> <a id="573" href="Relation.Nullary.html#597" class="InductiveConstructor">no</a><a id="575" class="Symbol">)</a>
<a id="577" class="Keyword">open</a> <a id="582" class="Keyword">import</a> <a id="589" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="616" class="Keyword">using</a> <a id="622" class="Symbol">(</a><a id="623" href="Relation.Nullary.Decidable.html#822" class="Function Operator">⌊_⌋</a><a id="626" class="Symbol">)</a>

<a id="629" class="Comment">------------------------------------------------------------------------</a>
<a id="702" class="Comment">-- An informative equality test.</a>

<a id="736" class="Keyword">infix</a> <a id="742" class="Number">4</a> <a id="744" href="Data.String.Unsafe.html#749" class="Function Operator">_≟_</a>

<a id="_≟_"></a><a id="749" href="Data.String.Unsafe.html#749" class="Function Operator">_≟_</a> <a id="753" class="Symbol">:</a> <a id="755" href="Relation.Binary.Core.html#4499" class="Function">Decidable</a> <a id="765" class="Symbol">{</a><a id="766" class="Argument">A</a> <a id="768" class="Symbol">=</a> <a id="770" href="Agda.Builtin.String.html#165" class="Postulate">String</a><a id="776" class="Symbol">}</a> <a id="778" href="Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a>
<a id="782" href="Data.String.Unsafe.html#782" class="Bound">s₁</a> <a id="785" href="Data.String.Unsafe.html#749" class="Function Operator">≟</a> <a id="787" href="Data.String.Unsafe.html#787" class="Bound">s₂</a> <a id="790" class="Keyword">with</a> <a id="795" href="Agda.Builtin.String.html#353" class="Primitive">primStringEquality</a> <a id="814" href="Data.String.Unsafe.html#782" class="Bound">s₁</a> <a id="817" href="Data.String.Unsafe.html#787" class="Bound">s₂</a>
<a id="820" class="Symbol">...</a> <a id="824" class="Symbol">|</a> <a id="826" href="Agda.Builtin.Bool.html#92" class="InductiveConstructor">true</a>  <a id="832" class="Symbol">=</a> <a id="834" href="Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="838" href="Relation.Binary.PropositionalEquality.TrustMe.html#547" class="Function">trustMe</a>
<a id="846" class="Symbol">...</a> <a id="850" class="Symbol">|</a> <a id="852" href="Agda.Builtin.Bool.html#86" class="InductiveConstructor">false</a> <a id="858" class="Symbol">=</a> <a id="860" href="Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="863" href="Data.String.Unsafe.html#890" class="Postulate">whatever</a>
  <a id="874" class="Keyword">where</a> <a id="880" class="Keyword">postulate</a> <a id="890" href="Data.String.Unsafe.html#890" class="Postulate">whatever</a> <a id="899" class="Symbol">:</a> <a id="901" class="Symbol">_</a>

<a id="904" class="Comment">------------------------------------------------------------------------</a>
<a id="977" class="Comment">-- Boolean equality test.</a>
<a id="1003" class="Comment">--</a>
<a id="1006" class="Comment">-- Why is the definition _==_ = primStringEquality not used? One</a>
<a id="1071" class="Comment">-- reason is that the present definition can sometimes improve type</a>
<a id="1139" class="Comment">-- inference, at least with the version of Agda that is current at the</a>
<a id="1210" class="Comment">-- time of writing: see unit-test below.</a>

<a id="1252" class="Keyword">infix</a> <a id="1258" class="Number">4</a> <a id="1260" href="Data.String.Unsafe.html#1266" class="Function Operator">_==_</a>

<a id="_==_"></a><a id="1266" href="Data.String.Unsafe.html#1266" class="Function Operator">_==_</a> <a id="1271" class="Symbol">:</a> <a id="1273" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="1280" class="Symbol">→</a> <a id="1282" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="1289" class="Symbol">→</a> <a id="1291" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a>
<a id="1296" href="Data.String.Unsafe.html#1296" class="Bound">s₁</a> <a id="1299" href="Data.String.Unsafe.html#1266" class="Function Operator">==</a> <a id="1302" href="Data.String.Unsafe.html#1302" class="Bound">s₂</a> <a id="1305" class="Symbol">=</a> <a id="1307" href="Relation.Nullary.Decidable.html#822" class="Function Operator">⌊</a> <a id="1309" href="Data.String.Unsafe.html#1296" class="Bound">s₁</a> <a id="1312" href="Data.String.Unsafe.html#749" class="Function Operator">≟</a> <a id="1314" href="Data.String.Unsafe.html#1302" class="Bound">s₂</a> <a id="1317" href="Relation.Nullary.Decidable.html#822" class="Function Operator">⌋</a>

<a id="1320" class="Keyword">private</a>

  <a id="1331" class="Comment">-- The following unit test does not type-check (at the time of</a>
  <a id="1396" class="Comment">-- writing) if _==_ is replaced by primStringEquality.</a>

  <a id="1454" class="Keyword">data</a> <a id="P"></a><a id="1459" href="Data.String.Unsafe.html#1459" class="Datatype">P</a> <a id="1461" class="Symbol">:</a> <a id="1463" class="Symbol">(</a><a id="1464" href="Agda.Builtin.String.html#165" class="Postulate">String</a> <a id="1471" class="Symbol">→</a> <a id="1473" href="Agda.Builtin.Bool.html#67" class="Datatype">Bool</a><a id="1477" class="Symbol">)</a> <a id="1479" class="Symbol">→</a> <a id="1481" class="PrimitiveType">Set</a> <a id="1485" class="Keyword">where</a>
    <a id="P.p"></a><a id="1495" href="Data.String.Unsafe.html#1495" class="InductiveConstructor">p</a> <a id="1497" class="Symbol">:</a> <a id="1499" class="Symbol">(</a><a id="1500" href="Data.String.Unsafe.html#1500" class="Bound">c</a> <a id="1502" class="Symbol">:</a> <a id="1504" href="Agda.Builtin.String.html#165" class="Postulate">String</a><a id="1510" class="Symbol">)</a> <a id="1512" class="Symbol">→</a> <a id="1514" href="Data.String.Unsafe.html#1459" class="Datatype">P</a> <a id="1516" class="Symbol">(</a><a id="1517" href="Data.String.Unsafe.html#1266" class="Function Operator">_==_</a> <a id="1522" href="Data.String.Unsafe.html#1500" class="Bound">c</a><a id="1523" class="Symbol">)</a>

  <a id="unit-test"></a><a id="1528" href="Data.String.Unsafe.html#1528" class="Function">unit-test</a> <a id="1538" class="Symbol">:</a> <a id="1540" href="Data.String.Unsafe.html#1459" class="Datatype">P</a> <a id="1542" class="Symbol">(</a><a id="1543" href="Data.String.Unsafe.html#1266" class="Function Operator">_==_</a> <a id="1548" class="String">&quot;&quot;</a><a id="1550" class="Symbol">)</a>
  <a id="1554" href="Data.String.Unsafe.html#1528" class="Function">unit-test</a> <a id="1564" class="Symbol">=</a> <a id="1566" href="Data.String.Unsafe.html#1495" class="InductiveConstructor">p</a> <a id="1568" class="Symbol">_</a>

<a id="1571" class="Comment">------------------------------------------------------------------------</a>
<a id="1644" class="Comment">-- Equality</a>

<a id="decSetoid"></a><a id="1657" href="Data.String.Unsafe.html#1657" class="Function">decSetoid</a> <a id="1667" class="Symbol">:</a> <a id="1669" href="Relation.Binary.html#2694" class="Record">DecSetoid</a> <a id="1679" class="Symbol">_</a> <a id="1681" class="Symbol">_</a>
<a id="1683" href="Data.String.Unsafe.html#1657" class="Function">decSetoid</a> <a id="1693" class="Symbol">=</a> <a id="1695" href="Relation.Binary.PropositionalEquality.html#1693" class="Function">PropEq.decSetoid</a> <a id="1712" href="Data.String.Unsafe.html#749" class="Function Operator">_≟_</a>

<a id="1717" class="Comment">------------------------------------------------------------------------</a>
<a id="1790" class="Comment">-- Other properties</a>

<a id="toList∘fromList"></a><a id="1811" href="Data.String.Unsafe.html#1811" class="Function">toList∘fromList</a> <a id="1827" class="Symbol">:</a> <a id="1829" class="Symbol">∀</a> <a id="1831" href="Data.String.Unsafe.html#1831" class="Bound">s</a> <a id="1833" class="Symbol">→</a> <a id="1835" href="Data.String.Base.html#869" class="Function">toList</a> <a id="1842" class="Symbol">(</a><a id="1843" href="Data.String.Base.html#924" class="Function">fromList</a> <a id="1852" href="Data.String.Unsafe.html#1831" class="Bound">s</a><a id="1853" class="Symbol">)</a> <a id="1855" href="Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="1857" href="Data.String.Unsafe.html#1831" class="Bound">s</a>
<a id="1859" href="Data.String.Unsafe.html#1811" class="Function">toList∘fromList</a> <a id="1875" href="Data.String.Unsafe.html#1875" class="Bound">s</a> <a id="1877" class="Symbol">=</a> <a id="1879" href="Relation.Binary.PropositionalEquality.TrustMe.html#547" class="Function">trustMe</a>

<a id="fromList∘toList"></a><a id="1888" href="Data.String.Unsafe.html#1888" class="Function">fromList∘toList</a> <a id="1904" class="Symbol">:</a> <a id="1906" class="Symbol">∀</a> <a id="1908" href="Data.String.Unsafe.html#1908" class="Bound">s</a> <a id="1910" class="Symbol">→</a> <a id="1912" href="Data.String.Base.html#924" class="Function">fromList</a> <a id="1921" class="Symbol">(</a><a id="1922" href="Data.String.Base.html#869" class="Function">toList</a> <a id="1929" href="Data.String.Unsafe.html#1908" class="Bound">s</a><a id="1930" class="Symbol">)</a> <a id="1932" href="Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="1934" href="Data.String.Unsafe.html#1908" class="Bound">s</a>
<a id="1936" href="Data.String.Unsafe.html#1888" class="Function">fromList∘toList</a> <a id="1952" href="Data.String.Unsafe.html#1952" class="Bound">s</a> <a id="1954" class="Symbol">=</a> <a id="1956" href="Relation.Binary.PropositionalEquality.TrustMe.html#547" class="Function">trustMe</a>
</pre></body></html>