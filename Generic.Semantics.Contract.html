<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Semantics.Contract</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--sized-types</a> <a id="34" class="Symbol">#-}</a>

<a id="39" class="Keyword">module</a> <a id="46" href="Generic.Semantics.Contract.html" class="Module">Generic.Semantics.Contract</a> <a id="73" class="Keyword">where</a>

<a id="80" class="Keyword">open</a> <a id="85" class="Keyword">import</a> <a id="92" href="Size.html" class="Module">Size</a>
<a id="97" class="Keyword">open</a> <a id="102" class="Keyword">import</a> <a id="109" href="Data.List.html" class="Module">Data.List</a> <a id="119" class="Keyword">hiding</a> <a id="126" class="Symbol">(</a><a id="127" href="Data.List.Base.html#4738" class="Function Operator">[_]</a> <a id="131" class="Symbol">;</a> <a id="133" href="Data.List.Base.html#5819" class="Function">lookup</a><a id="139" class="Symbol">)</a>
<a id="141" class="Keyword">open</a> <a id="146" class="Keyword">import</a> <a id="153" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="164" class="Symbol">as</a> <a id="167" class="Module">Maybe</a>
<a id="173" class="Keyword">open</a> <a id="178" class="Keyword">import</a> <a id="185" href="Data.Maybe.Categorical.html" class="Module">Data.Maybe.Categorical</a>
<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Function.html" class="Module">Function</a>
<a id="229" class="Keyword">open</a> <a id="234" class="Keyword">import</a> <a id="241" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="279" class="Keyword">hiding</a> <a id="286" class="Symbol">(</a><a id="287" href="Relation.Binary.PropositionalEquality.html#2356" class="InductiveConstructor Operator">[_]</a><a id="290" class="Symbol">)</a>
<a id="292" class="Keyword">open</a> <a id="297" href="Relation.Binary.PropositionalEquality.Core.html#2751" class="Module">≡-Reasoning</a>

<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Relation.Unary.html" class="Module">Relation.Unary</a>
<a id="337" class="Keyword">open</a> <a id="342" class="Keyword">import</a> <a id="349" href="Data.Var.html" class="Module">Data.Var</a>
<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Data.Var.Varlike.html" class="Module">Data.Var.Varlike</a>
<a id="387" class="Keyword">open</a> <a id="392" class="Keyword">import</a> <a id="399" href="Data.Environment.html" class="Module">Data.Environment</a>
<a id="416" class="Keyword">open</a> <a id="421" class="Keyword">import</a> <a id="428" href="Data.Relation.html" class="Module">Data.Relation</a>
<a id="442" class="Keyword">open</a> <a id="447" class="Keyword">import</a> <a id="454" href="Generic.Syntax.html" class="Module">Generic.Syntax</a>
<a id="469" class="Keyword">open</a> <a id="474" class="Keyword">import</a> <a id="481" href="Generic.Semantics.html" class="Module">Generic.Semantics</a>

<a id="500" class="Keyword">open</a> <a id="505" href="Generic.Semantics.html#814" class="Module">Semantics</a>

<a id="516" class="Keyword">private</a>
  <a id="526" class="Keyword">variable</a>
    <a id="539" href="Generic.Semantics.Contract.html#539" class="Generalizable">I</a> <a id="541" class="Symbol">:</a> <a id="543" class="PrimitiveType">Set</a>
    <a id="551" href="Generic.Semantics.Contract.html#551" class="Generalizable">σ</a> <a id="553" href="Generic.Semantics.Contract.html#553" class="Generalizable">τ</a> <a id="555" class="Symbol">:</a> <a id="557" href="Generic.Semantics.Contract.html#539" class="Generalizable">I</a>
    <a id="563" href="Generic.Semantics.Contract.html#563" class="Generalizable">Γ</a> <a id="565" href="Generic.Semantics.Contract.html#565" class="Generalizable">Δ</a> <a id="567" class="Symbol">:</a> <a id="569" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="574" href="Generic.Semantics.Contract.html#539" class="Generalizable">I</a>
    <a id="580" href="Generic.Semantics.Contract.html#580" class="Generalizable">d</a> <a id="582" class="Symbol">:</a> <a id="584" href="Generic.Syntax.html#527" class="Datatype">Desc</a> <a id="589" href="Generic.Semantics.Contract.html#539" class="Generalizable">I</a>

<a id="MVar"></a><a id="592" href="Generic.Semantics.Contract.html#592" class="Function">MVar</a> <a id="597" class="Symbol">:</a> <a id="599" href="Generic.Semantics.Contract.html#539" class="Generalizable">I</a> <a id="601" href="Data.Var.html#531" class="Function Operator">─Scoped</a>
<a id="609" href="Generic.Semantics.Contract.html#592" class="Function">MVar</a> <a id="614" href="Generic.Semantics.Contract.html#614" class="Bound">i</a> <a id="616" href="Generic.Semantics.Contract.html#616" class="Bound">Γ</a> <a id="618" class="Symbol">=</a> <a id="620" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="626" class="Symbol">(</a><a id="627" href="Data.Var.html#636" class="Datatype">Var</a> <a id="631" href="Generic.Semantics.Contract.html#614" class="Bound">i</a> <a id="633" href="Generic.Semantics.Contract.html#616" class="Bound">Γ</a><a id="634" class="Symbol">)</a>

<a id="th^MVar"></a><a id="637" href="Generic.Semantics.Contract.html#637" class="Function">th^MVar</a> <a id="645" class="Symbol">:</a> <a id="647" href="Data.Environment.html#3709" class="Function">Thinnable</a> <a id="657" class="Symbol">(</a><a id="658" href="Generic.Semantics.Contract.html#592" class="Function">MVar</a> <a id="663" href="Generic.Semantics.Contract.html#551" class="Generalizable">σ</a><a id="664" class="Symbol">)</a>
<a id="666" href="Generic.Semantics.Contract.html#637" class="Function">th^MVar</a> <a id="674" href="Generic.Semantics.Contract.html#674" class="Bound">mv</a> <a id="677" href="Generic.Semantics.Contract.html#677" class="Bound">ρ</a> <a id="679" class="Symbol">=</a> <a id="681" href="Data.Maybe.Base.html#2039" class="Function">Maybe.map</a> <a id="691" class="Symbol">(λ</a> <a id="694" href="Generic.Semantics.Contract.html#694" class="Bound">v</a> <a id="696" class="Symbol">→</a> <a id="698" href="Data.Environment.html#3770" class="Function">th^Var</a> <a id="705" href="Generic.Semantics.Contract.html#694" class="Bound">v</a> <a id="707" href="Generic.Semantics.Contract.html#677" class="Bound">ρ</a><a id="708" class="Symbol">)</a> <a id="710" href="Generic.Semantics.Contract.html#674" class="Bound">mv</a>

<a id="vl^MVar"></a><a id="714" href="Generic.Semantics.Contract.html#714" class="Function">vl^MVar</a> <a id="722" class="Symbol">:</a> <a id="724" href="Data.Var.Varlike.html#512" class="Record">VarLike</a> <a id="732" class="Symbol">{</a><a id="733" href="Generic.Semantics.Contract.html#539" class="Generalizable">I</a><a id="734" class="Symbol">}</a> <a id="736" href="Generic.Semantics.Contract.html#592" class="Function">MVar</a>
<a id="741" href="Data.Var.Varlike.html#557" class="Field">th^𝓥</a> <a id="746" href="Generic.Semantics.Contract.html#714" class="Function">vl^MVar</a> <a id="754" class="Symbol">=</a> <a id="756" href="Generic.Semantics.Contract.html#637" class="Function">th^MVar</a>
<a id="764" href="Data.Var.Varlike.html#590" class="Field">new</a> <a id="768" href="Generic.Semantics.Contract.html#714" class="Function">vl^MVar</a> <a id="776" class="Symbol">=</a> <a id="778" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="783" href="Data.Var.html#660" class="InductiveConstructor">z</a>

<a id="MTm"></a><a id="786" href="Generic.Semantics.Contract.html#786" class="Function">MTm</a> <a id="790" class="Symbol">:</a> <a id="792" class="Symbol">∀</a> <a id="794" href="Generic.Semantics.Contract.html#794" class="Bound">d</a> <a id="796" class="Symbol">→</a> <a id="798" href="Generic.Semantics.Contract.html#539" class="Generalizable">I</a> <a id="800" href="Data.Var.html#531" class="Function Operator">─Scoped</a>
<a id="808" href="Generic.Semantics.Contract.html#786" class="Function">MTm</a> <a id="812" href="Generic.Semantics.Contract.html#812" class="Bound">d</a> <a id="814" href="Generic.Semantics.Contract.html#814" class="Bound">i</a> <a id="816" href="Generic.Semantics.Contract.html#816" class="Bound">Γ</a> <a id="818" class="Symbol">=</a> <a id="820" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="826" class="Symbol">(</a><a id="827" href="Generic.Syntax.html#1317" class="Datatype">Tm</a> <a id="830" href="Generic.Semantics.Contract.html#812" class="Bound">d</a> <a id="832" class="Symbol">_</a> <a id="834" href="Generic.Semantics.Contract.html#814" class="Bound">i</a> <a id="836" href="Generic.Semantics.Contract.html#816" class="Bound">Γ</a><a id="837" class="Symbol">)</a>


<a id="Contract"></a><a id="841" href="Generic.Semantics.Contract.html#841" class="Function">Contract</a> <a id="850" class="Symbol">:</a> <a id="852" href="Generic.Semantics.html#814" class="Record">Semantics</a> <a id="862" href="Generic.Semantics.Contract.html#580" class="Generalizable">d</a> <a id="864" href="Generic.Semantics.Contract.html#592" class="Function">MVar</a> <a id="869" class="Symbol">(</a><a id="870" href="Generic.Semantics.Contract.html#786" class="Function">MTm</a> <a id="874" href="Generic.Semantics.Contract.html#580" class="Generalizable">d</a><a id="875" class="Symbol">)</a>
<a id="877" href="Generic.Semantics.html#879" class="Field">th^𝓥</a> <a id="882" href="Generic.Semantics.Contract.html#841" class="Function">Contract</a> <a id="891" class="Symbol">=</a> <a id="893" href="Generic.Semantics.Contract.html#637" class="Function">th^MVar</a>
<a id="901" href="Generic.Semantics.html#906" class="Field">var</a> <a id="905" href="Generic.Semantics.Contract.html#841" class="Function">Contract</a> <a id="914" class="Symbol">=</a> <a id="916" href="Data.Maybe.Base.html#2039" class="Function">Maybe.map</a> <a id="926" href="Generic.Syntax.html#1361" class="InductiveConstructor">`var</a>
<a id="931" href="Generic.Semantics.html#931" class="Field">alg</a> <a id="935" href="Generic.Semantics.Contract.html#841" class="Function">Contract</a> <a id="944" class="Symbol">=</a> <a id="946" href="Data.Maybe.Base.html#2039" class="Function">Maybe.map</a> <a id="956" href="Generic.Syntax.html#1418" class="InductiveConstructor">`con</a> <a id="961" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="963" href="Generic.Syntax.html#4894" class="Function">mapA</a> <a id="968" class="Symbol">_</a> <a id="970" class="Symbol">(</a><a id="971" href="Data.Var.Varlike.html#1200" class="Function">reify</a> <a id="977" href="Generic.Semantics.Contract.html#714" class="Function">vl^MVar</a><a id="984" class="Symbol">)</a>
  <a id="988" class="Keyword">where</a> <a id="994" class="Keyword">instance</a> <a id="1003" href="Generic.Semantics.Contract.html#1003" class="Function">_</a> <a id="1005" class="Symbol">=</a> <a id="1007" href="Data.Maybe.Categorical.html#646" class="Function">applicative</a>

<a id="contract"></a><a id="1020" href="Generic.Semantics.Contract.html#1020" class="Function">contract</a> <a id="1029" class="Symbol">:</a> <a id="1031" href="Generic.Syntax.html#1317" class="Datatype">Tm</a> <a id="1034" href="Generic.Semantics.Contract.html#580" class="Generalizable">d</a> <a id="1036" class="Symbol">_</a> <a id="1038" href="Generic.Semantics.Contract.html#551" class="Generalizable">σ</a> <a id="1040" class="Symbol">(</a><a id="1041" href="Generic.Semantics.Contract.html#553" class="Generalizable">τ</a> <a id="1043" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1045" href="Generic.Semantics.Contract.html#563" class="Generalizable">Γ</a><a id="1046" class="Symbol">)</a> <a id="1048" class="Symbol">→</a> <a id="1050" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="1056" class="Symbol">(</a><a id="1057" href="Generic.Syntax.html#1317" class="Datatype">Tm</a> <a id="1060" href="Generic.Semantics.Contract.html#580" class="Generalizable">d</a> <a id="1062" class="Symbol">_</a> <a id="1064" href="Generic.Semantics.Contract.html#551" class="Generalizable">σ</a> <a id="1066" href="Generic.Semantics.Contract.html#563" class="Generalizable">Γ</a><a id="1067" class="Symbol">)</a>
<a id="1069" href="Generic.Semantics.Contract.html#1020" class="Function">contract</a> <a id="1078" class="Symbol">=</a> <a id="1080" href="Generic.Semantics.html#971" class="Function">semantics</a> <a id="1090" href="Generic.Semantics.Contract.html#841" class="Function">Contract</a> <a id="1099" class="Symbol">(</a><a id="1100" href="Data.Environment.html#640" class="InductiveConstructor">pack</a> <a id="1105" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="1110" href="Data.Environment.html#2178" class="Function Operator">∙</a> <a id="1112" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a><a id="1119" class="Symbol">)</a>
</pre></body></html>