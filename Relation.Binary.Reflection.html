<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Relation.Binary.Reflection</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Helpers intended to ease the development of &quot;tactics&quot; which use</a>
<a id="173" class="Comment">-- proof by reflection</a>
<a id="196" class="Comment">------------------------------------------------------------------------</a>

<a id="270" class="Symbol">{-#</a> <a id="274" class="Keyword">OPTIONS</a> <a id="282" class="Pragma">--without-K</a> <a id="294" class="Pragma">--safe</a> <a id="301" class="Symbol">#-}</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a>
<a id="332" class="Keyword">open</a> <a id="337" class="Keyword">import</a> <a id="344" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="384" class="Symbol">as</a> <a id="387" class="Module">Vec</a>
<a id="391" class="Keyword">open</a> <a id="396" class="Keyword">import</a> <a id="403" href="Function.Base.html" class="Module">Function.Base</a>
<a id="417" class="Keyword">open</a> <a id="422" class="Keyword">import</a> <a id="429" href="Function.Equality.html" class="Module">Function.Equality</a> <a id="447" class="Keyword">using</a> <a id="453" class="Symbol">(</a><a id="454" href="Function.Equality.html#1064" class="Field Operator">_⟨$⟩_</a><a id="459" class="Symbol">)</a>
<a id="461" class="Keyword">open</a> <a id="466" class="Keyword">import</a> <a id="473" href="Function.Equivalence.html" class="Module">Function.Equivalence</a> <a id="494" class="Keyword">using</a> <a id="500" class="Symbol">(</a><a id="501" class="Keyword">module</a> <a id="508" href="Function.Equivalence.html#829" class="Module">Equivalence</a><a id="519" class="Symbol">)</a>
<a id="521" class="Keyword">open</a> <a id="526" class="Keyword">import</a> <a id="533" href="Level.html" class="Module">Level</a>
<a id="539" class="Keyword">open</a> <a id="544" class="Keyword">import</a> <a id="551" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="567" class="Keyword">import</a> <a id="574" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="612" class="Symbol">as</a> <a id="615" class="Module">P</a>

<a id="618" class="Comment">-- Think of the parameters as follows:</a>
<a id="657" class="Comment">--</a>
<a id="660" class="Comment">-- * Expr:    A representation of code.</a>
<a id="700" class="Comment">-- * var:     The Expr type should support a notion of variables.</a>
<a id="766" class="Comment">-- * ⟦_⟧:     Computes the semantics of an expression. Takes an</a>
<a id="830" class="Comment">--            environment mapping variables to something.</a>
<a id="888" class="Comment">-- * ⟦_⇓⟧:    Computes the semantics of the normal form of the</a>
<a id="951" class="Comment">--            expression.</a>
<a id="977" class="Comment">-- * correct: Normalisation preserves the semantics.</a>
<a id="1030" class="Comment">--</a>
<a id="1033" class="Comment">-- Given these parameters two &quot;tactics&quot; are returned, prove and solve.</a>
<a id="1104" class="Comment">--</a>
<a id="1107" class="Comment">-- For an example of the use of this module, see Algebra.RingSolver.</a>

<a id="1177" class="Keyword">module</a> <a id="1184" href="Relation.Binary.Reflection.html" class="Module">Relation.Binary.Reflection</a>
         <a id="1220" class="Symbol">{</a><a id="1221" href="Relation.Binary.Reflection.html#1221" class="Bound">e</a> <a id="1223" href="Relation.Binary.Reflection.html#1223" class="Bound">a</a> <a id="1225" href="Relation.Binary.Reflection.html#1225" class="Bound">s</a><a id="1226" class="Symbol">}</a>
         <a id="1237" class="Symbol">{</a><a id="1238" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="1243" class="Symbol">:</a> <a id="1245" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1247" class="Symbol">→</a> <a id="1249" class="PrimitiveType">Set</a> <a id="1253" href="Relation.Binary.Reflection.html#1221" class="Bound">e</a><a id="1254" class="Symbol">}</a> <a id="1256" class="Symbol">{</a><a id="1257" href="Relation.Binary.Reflection.html#1257" class="Bound">A</a> <a id="1259" class="Symbol">:</a> <a id="1261" class="PrimitiveType">Set</a> <a id="1265" href="Relation.Binary.Reflection.html#1223" class="Bound">a</a><a id="1266" class="Symbol">}</a>
         <a id="1277" class="Symbol">(</a><a id="1278" href="Relation.Binary.Reflection.html#1278" class="Bound">Sem</a> <a id="1282" class="Symbol">:</a> <a id="1284" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="1291" href="Relation.Binary.Reflection.html#1223" class="Bound">a</a> <a id="1293" href="Relation.Binary.Reflection.html#1225" class="Bound">s</a><a id="1294" class="Symbol">)</a>
         <a id="1305" class="Symbol">(</a><a id="1306" href="Relation.Binary.Reflection.html#1306" class="Bound">var</a> <a id="1310" class="Symbol">:</a> <a id="1312" class="Symbol">∀</a> <a id="1314" class="Symbol">{</a><a id="1315" href="Relation.Binary.Reflection.html#1315" class="Bound">n</a><a id="1316" class="Symbol">}</a> <a id="1318" class="Symbol">→</a> <a id="1320" href="Data.Fin.Base.html#1146" class="Datatype">Fin</a> <a id="1324" href="Relation.Binary.Reflection.html#1315" class="Bound">n</a> <a id="1326" class="Symbol">→</a> <a id="1328" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="1333" href="Relation.Binary.Reflection.html#1315" class="Bound">n</a><a id="1334" class="Symbol">)</a>
         <a id="1345" class="Symbol">(</a><a id="1346" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦_⟧</a> <a id="1350" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦_⇓⟧</a> <a id="1355" class="Symbol">:</a> <a id="1357" class="Symbol">∀</a> <a id="1359" class="Symbol">{</a><a id="1360" href="Relation.Binary.Reflection.html#1360" class="Bound">n</a><a id="1361" class="Symbol">}</a> <a id="1363" class="Symbol">→</a> <a id="1365" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="1370" href="Relation.Binary.Reflection.html#1360" class="Bound">n</a> <a id="1372" class="Symbol">→</a> <a id="1374" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="1378" href="Relation.Binary.Reflection.html#1257" class="Bound">A</a> <a id="1380" href="Relation.Binary.Reflection.html#1360" class="Bound">n</a> <a id="1382" class="Symbol">→</a> <a id="1384" href="Relation.Binary.Bundles.html#1072" class="Field">Setoid.Carrier</a> <a id="1399" href="Relation.Binary.Reflection.html#1278" class="Bound">Sem</a><a id="1402" class="Symbol">)</a>
         <a id="1413" class="Symbol">(</a><a id="1414" href="Relation.Binary.Reflection.html#1414" class="Bound">correct</a> <a id="1422" class="Symbol">:</a> <a id="1424" class="Symbol">∀</a> <a id="1426" class="Symbol">{</a><a id="1427" href="Relation.Binary.Reflection.html#1427" class="Bound">n</a><a id="1428" class="Symbol">}</a> <a id="1430" class="Symbol">(</a><a id="1431" href="Relation.Binary.Reflection.html#1431" class="Bound">e</a> <a id="1433" class="Symbol">:</a> <a id="1435" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="1440" href="Relation.Binary.Reflection.html#1427" class="Bound">n</a><a id="1441" class="Symbol">)</a> <a id="1443" href="Relation.Binary.Reflection.html#1443" class="Bound">ρ</a> <a id="1445" class="Symbol">→</a>
                    <a id="1467" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="1469" href="Relation.Binary.Reflection.html#1431" class="Bound">e</a> <a id="1471" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="1474" href="Relation.Binary.Reflection.html#1443" class="Bound">ρ</a> <a id="1476" href="Function.Base.html#4398" class="Function Operator">⟨</a> <a id="1478" href="Relation.Binary.Bundles.html#1098" class="Field Operator">Setoid._≈_</a> <a id="1489" href="Relation.Binary.Reflection.html#1278" class="Bound">Sem</a> <a id="1493" href="Function.Base.html#4398" class="Function Operator">⟩</a> <a id="1495" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="1497" href="Relation.Binary.Reflection.html#1431" class="Bound">e</a> <a id="1499" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="1501" href="Relation.Binary.Reflection.html#1443" class="Bound">ρ</a><a id="1502" class="Symbol">)</a>
         <a id="1513" class="Keyword">where</a>

<a id="1520" class="Keyword">open</a> <a id="1525" class="Keyword">import</a> <a id="1532" href="Data.Vec.N-ary.html" class="Module">Data.Vec.N-ary</a>
<a id="1547" class="Keyword">open</a> <a id="1552" class="Keyword">import</a> <a id="1559" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1572" class="Keyword">import</a> <a id="1579" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="1612" class="Symbol">as</a> <a id="1615" class="Module">Eq</a>

<a id="1619" class="Keyword">open</a> <a id="1624" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="1631" href="Relation.Binary.Reflection.html#1278" class="Bound">Sem</a>
<a id="1635" class="Keyword">open</a> <a id="1640" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Eq</a> <a id="1643" href="Relation.Binary.Reflection.html#1278" class="Bound">Sem</a>

<a id="1648" class="Comment">-- If two normalised expressions are semantically equal, then their</a>
<a id="1716" class="Comment">-- non-normalised forms are also equal.</a>

<a id="prove"></a><a id="1757" href="Relation.Binary.Reflection.html#1757" class="Function">prove</a> <a id="1763" class="Symbol">:</a> <a id="1765" class="Symbol">∀</a> <a id="1767" class="Symbol">{</a><a id="1768" href="Relation.Binary.Reflection.html#1768" class="Bound">n</a><a id="1769" class="Symbol">}</a> <a id="1771" class="Symbol">(</a><a id="1772" href="Relation.Binary.Reflection.html#1772" class="Bound">ρ</a> <a id="1774" class="Symbol">:</a> <a id="1776" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="1780" href="Relation.Binary.Reflection.html#1257" class="Bound">A</a> <a id="1782" href="Relation.Binary.Reflection.html#1768" class="Bound">n</a><a id="1783" class="Symbol">)</a> <a id="1785" href="Relation.Binary.Reflection.html#1785" class="Bound">e₁</a> <a id="1788" href="Relation.Binary.Reflection.html#1788" class="Bound">e₂</a> <a id="1791" class="Symbol">→</a>
        <a id="1801" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="1803" href="Relation.Binary.Reflection.html#1785" class="Bound">e₁</a> <a id="1806" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="1809" href="Relation.Binary.Reflection.html#1772" class="Bound">ρ</a> <a id="1811" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="1813" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="1815" href="Relation.Binary.Reflection.html#1788" class="Bound">e₂</a> <a id="1818" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="1821" href="Relation.Binary.Reflection.html#1772" class="Bound">ρ</a> <a id="1823" class="Symbol">→</a>
        <a id="1833" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="1835" href="Relation.Binary.Reflection.html#1785" class="Bound">e₁</a>  <a id="1839" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="1841" href="Relation.Binary.Reflection.html#1772" class="Bound">ρ</a> <a id="1843" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="1845" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="1847" href="Relation.Binary.Reflection.html#1788" class="Bound">e₂</a>  <a id="1851" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="1853" href="Relation.Binary.Reflection.html#1772" class="Bound">ρ</a>
<a id="1855" href="Relation.Binary.Reflection.html#1757" class="Function">prove</a> <a id="1861" href="Relation.Binary.Reflection.html#1861" class="Bound">ρ</a> <a id="1863" href="Relation.Binary.Reflection.html#1863" class="Bound">e₁</a> <a id="1866" href="Relation.Binary.Reflection.html#1866" class="Bound">e₂</a> <a id="1869" href="Relation.Binary.Reflection.html#1869" class="Bound">hyp</a> <a id="1873" class="Symbol">=</a> <a id="1875" href="Relation.Binary.Reasoning.Base.Partial.html#1660" class="Function Operator">begin</a>
  <a id="1883" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="1885" href="Relation.Binary.Reflection.html#1863" class="Bound">e₁</a>  <a id="1889" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="1891" href="Relation.Binary.Reflection.html#1861" class="Bound">ρ</a> <a id="1893" href="Relation.Binary.Reasoning.PartialSetoid.html#797" class="Function">≈⟨</a> <a id="1896" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="1900" class="Symbol">(</a><a id="1901" href="Relation.Binary.Reflection.html#1414" class="Bound">correct</a> <a id="1909" href="Relation.Binary.Reflection.html#1863" class="Bound">e₁</a> <a id="1912" href="Relation.Binary.Reflection.html#1861" class="Bound">ρ</a><a id="1913" class="Symbol">)</a> <a id="1915" href="Relation.Binary.Reasoning.PartialSetoid.html#797" class="Function">⟩</a>
  <a id="1919" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="1921" href="Relation.Binary.Reflection.html#1863" class="Bound">e₁</a> <a id="1924" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="1927" href="Relation.Binary.Reflection.html#1861" class="Bound">ρ</a> <a id="1929" href="Relation.Binary.Reasoning.PartialSetoid.html#797" class="Function">≈⟨</a> <a id="1932" href="Relation.Binary.Reflection.html#1869" class="Bound">hyp</a> <a id="1936" href="Relation.Binary.Reasoning.PartialSetoid.html#797" class="Function">⟩</a>
  <a id="1940" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="1942" href="Relation.Binary.Reflection.html#1866" class="Bound">e₂</a> <a id="1945" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="1948" href="Relation.Binary.Reflection.html#1861" class="Bound">ρ</a> <a id="1950" href="Relation.Binary.Reasoning.PartialSetoid.html#797" class="Function">≈⟨</a> <a id="1953" href="Relation.Binary.Reflection.html#1414" class="Bound">correct</a> <a id="1961" href="Relation.Binary.Reflection.html#1866" class="Bound">e₂</a> <a id="1964" href="Relation.Binary.Reflection.html#1861" class="Bound">ρ</a> <a id="1966" href="Relation.Binary.Reasoning.PartialSetoid.html#797" class="Function">⟩</a>
  <a id="1970" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="1972" href="Relation.Binary.Reflection.html#1866" class="Bound">e₂</a>  <a id="1976" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="1978" href="Relation.Binary.Reflection.html#1861" class="Bound">ρ</a> <a id="1980" href="Relation.Binary.Reasoning.Base.Single.html#767" class="Function Operator">∎</a>

<a id="1983" class="Comment">-- Applies the function to all possible &quot;variables&quot;.</a>

<a id="close"></a><a id="2037" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2043" class="Symbol">:</a> <a id="2045" class="Symbol">∀</a> <a id="2047" class="Symbol">{</a><a id="2048" href="Relation.Binary.Reflection.html#2048" class="Bound">A</a> <a id="2050" class="Symbol">:</a> <a id="2052" class="PrimitiveType">Set</a> <a id="2056" href="Relation.Binary.Reflection.html#1221" class="Bound">e</a><a id="2057" class="Symbol">}</a> <a id="2059" href="Relation.Binary.Reflection.html#2059" class="Bound">n</a> <a id="2061" class="Symbol">→</a> <a id="2063" href="Data.Vec.N-ary.html#964" class="Function">N-ary</a> <a id="2069" href="Relation.Binary.Reflection.html#2059" class="Bound">n</a> <a id="2071" class="Symbol">(</a><a id="2072" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="2077" href="Relation.Binary.Reflection.html#2059" class="Bound">n</a><a id="2078" class="Symbol">)</a> <a id="2080" href="Relation.Binary.Reflection.html#2048" class="Bound">A</a> <a id="2082" class="Symbol">→</a> <a id="2084" href="Relation.Binary.Reflection.html#2048" class="Bound">A</a>
<a id="2086" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2092" href="Relation.Binary.Reflection.html#2092" class="Bound">n</a> <a id="2094" href="Relation.Binary.Reflection.html#2094" class="Bound">f</a> <a id="2096" class="Symbol">=</a> <a id="2098" href="Relation.Binary.Reflection.html#2094" class="Bound">f</a> <a id="2100" href="Data.Vec.N-ary.html#1297" class="Function Operator">$ⁿ</a> <a id="2103" href="Data.Vec.Base.html#2541" class="Function">Vec.map</a> <a id="2111" href="Relation.Binary.Reflection.html#1306" class="Bound">var</a> <a id="2115" class="Symbol">(</a><a id="2116" href="Data.Vec.Base.html#5972" class="Function">allFin</a> <a id="2123" href="Relation.Binary.Reflection.html#2092" class="Bound">n</a><a id="2124" class="Symbol">)</a>

<a id="2127" class="Comment">-- A variant of prove which should in many cases be easier to use,</a>
<a id="2194" class="Comment">-- because variables and environments are handled in a less explicit</a>
<a id="2263" class="Comment">-- way.</a>
<a id="2271" class="Comment">--</a>
<a id="2274" class="Comment">-- If the type signature of solve is a bit daunting, then it may be</a>
<a id="2342" class="Comment">-- helpful to instantiate n with a small natural number and normalise</a>
<a id="2412" class="Comment">-- the remainder of the type.</a>

<a id="solve"></a><a id="2443" href="Relation.Binary.Reflection.html#2443" class="Function">solve</a> <a id="2449" class="Symbol">:</a> <a id="2451" class="Symbol">∀</a> <a id="2453" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2455" class="Symbol">(</a><a id="2456" href="Relation.Binary.Reflection.html#2456" class="Bound">f</a> <a id="2458" class="Symbol">:</a> <a id="2460" href="Data.Vec.N-ary.html#964" class="Function">N-ary</a> <a id="2466" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2468" class="Symbol">(</a><a id="2469" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="2474" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a><a id="2475" class="Symbol">)</a> <a id="2477" class="Symbol">(</a><a id="2478" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="2483" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2485" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2487" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="2492" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a><a id="2493" class="Symbol">))</a> <a id="2496" class="Symbol">→</a>
  <a id="2500" href="Data.Vec.N-ary.html#2307" class="Function">Eqʰ</a> <a id="2504" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2506" href="Relation.Binary.Bundles.html#1098" class="Function Operator">_≈_</a> <a id="2510" class="Symbol">(</a><a id="2511" href="Data.Vec.N-ary.html#1175" class="Function">curryⁿ</a> <a id="2518" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="2520" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2526" class="Symbol">(</a><a id="2527" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2533" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2535" href="Relation.Binary.Reflection.html#2456" class="Bound">f</a><a id="2536" class="Symbol">)</a> <a id="2538" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a><a id="2540" class="Symbol">)</a> <a id="2542" class="Symbol">(</a><a id="2543" href="Data.Vec.N-ary.html#1175" class="Function">curryⁿ</a> <a id="2550" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="2552" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2558" class="Symbol">(</a><a id="2559" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2565" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2567" href="Relation.Binary.Reflection.html#2456" class="Bound">f</a><a id="2568" class="Symbol">)</a> <a id="2570" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a><a id="2572" class="Symbol">)</a> <a id="2574" class="Symbol">→</a>
  <a id="2578" href="Data.Vec.N-ary.html#2063" class="Function">Eq</a>  <a id="2582" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2584" href="Relation.Binary.Bundles.html#1098" class="Function Operator">_≈_</a> <a id="2588" class="Symbol">(</a><a id="2589" href="Data.Vec.N-ary.html#1175" class="Function">curryⁿ</a> <a id="2596" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="2598" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2604" class="Symbol">(</a><a id="2605" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2611" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2613" href="Relation.Binary.Reflection.html#2456" class="Bound">f</a><a id="2614" class="Symbol">)</a>  <a id="2617" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a><a id="2618" class="Symbol">)</a> <a id="2620" class="Symbol">(</a><a id="2621" href="Data.Vec.N-ary.html#1175" class="Function">curryⁿ</a> <a id="2628" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="2630" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2636" class="Symbol">(</a><a id="2637" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2643" href="Relation.Binary.Reflection.html#2453" class="Bound">n</a> <a id="2645" href="Relation.Binary.Reflection.html#2456" class="Bound">f</a><a id="2646" class="Symbol">)</a>  <a id="2649" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a><a id="2650" class="Symbol">)</a>
<a id="2652" href="Relation.Binary.Reflection.html#2443" class="Function">solve</a> <a id="2658" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2660" href="Relation.Binary.Reflection.html#2660" class="Bound">f</a> <a id="2662" href="Relation.Binary.Reflection.html#2662" class="Bound">hyp</a> <a id="2666" class="Symbol">=</a>
  <a id="2670" href="Data.Vec.N-ary.html#4064" class="Function">curryⁿ-cong</a> <a id="2682" href="Relation.Binary.Bundles.html#1098" class="Function Operator">_≈_</a> <a id="2686" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="2688" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2694" class="Symbol">(</a><a id="2695" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2701" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2703" href="Relation.Binary.Reflection.html#2660" class="Bound">f</a><a id="2704" class="Symbol">)</a> <a id="2706" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="2708" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="2710" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2716" class="Symbol">(</a><a id="2717" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2723" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2725" href="Relation.Binary.Reflection.html#2660" class="Bound">f</a><a id="2726" class="Symbol">)</a> <a id="2728" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a>
    <a id="2734" class="Symbol">(λ</a> <a id="2737" href="Relation.Binary.Reflection.html#2737" class="Bound">ρ</a> <a id="2739" class="Symbol">→</a> <a id="2741" href="Relation.Binary.Reflection.html#1757" class="Function">prove</a> <a id="2747" href="Relation.Binary.Reflection.html#2737" class="Bound">ρ</a> <a id="2749" class="Symbol">(</a><a id="2750" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2756" class="Symbol">(</a><a id="2757" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2763" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2765" href="Relation.Binary.Reflection.html#2660" class="Bound">f</a><a id="2766" class="Symbol">))</a> <a id="2769" class="Symbol">(</a><a id="2770" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2776" class="Symbol">(</a><a id="2777" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2783" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2785" href="Relation.Binary.Reflection.html#2660" class="Bound">f</a><a id="2786" class="Symbol">))</a>
             <a id="2802" class="Symbol">(</a><a id="2803" href="Data.Vec.N-ary.html#4358" class="Function">curryⁿ-cong⁻¹</a> <a id="2817" href="Relation.Binary.Bundles.html#1098" class="Function Operator">_≈_</a>
                <a id="2837" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="2839" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2845" class="Symbol">(</a><a id="2846" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2852" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2854" href="Relation.Binary.Reflection.html#2660" class="Bound">f</a><a id="2855" class="Symbol">)</a> <a id="2857" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="2860" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="2862" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2868" class="Symbol">(</a><a id="2869" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="2875" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2877" href="Relation.Binary.Reflection.html#2660" class="Bound">f</a><a id="2878" class="Symbol">)</a> <a id="2880" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a>
                <a id="2899" class="Symbol">(</a><a id="2900" href="Data.Vec.N-ary.html#5383" class="Function">Eqʰ-to-Eq</a> <a id="2910" href="Relation.Binary.Reflection.html#2658" class="Bound">n</a> <a id="2912" href="Relation.Binary.Bundles.html#1098" class="Function Operator">_≈_</a> <a id="2916" href="Relation.Binary.Reflection.html#2662" class="Bound">hyp</a><a id="2919" class="Symbol">)</a> <a id="2921" href="Relation.Binary.Reflection.html#2737" class="Bound">ρ</a><a id="2922" class="Symbol">))</a>

<a id="2926" class="Comment">-- A variant of solve which does not require that the normal form</a>
<a id="2992" class="Comment">-- equality is proved for an arbitrary environment.</a>

<a id="solve₁"></a><a id="3045" href="Relation.Binary.Reflection.html#3045" class="Function">solve₁</a> <a id="3052" class="Symbol">:</a> <a id="3054" class="Symbol">∀</a> <a id="3056" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3058" class="Symbol">(</a><a id="3059" href="Relation.Binary.Reflection.html#3059" class="Bound">f</a> <a id="3061" class="Symbol">:</a> <a id="3063" href="Data.Vec.N-ary.html#964" class="Function">N-ary</a> <a id="3069" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3071" class="Symbol">(</a><a id="3072" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="3077" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a><a id="3078" class="Symbol">)</a> <a id="3080" class="Symbol">(</a><a id="3081" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="3086" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3088" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3090" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="3095" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a><a id="3096" class="Symbol">))</a> <a id="3099" class="Symbol">→</a>
         <a id="3110" href="Data.Vec.N-ary.html#1532" class="Function">∀ⁿ</a> <a id="3113" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3115" class="Symbol">(</a><a id="3116" href="Data.Vec.N-ary.html#1175" class="Function">curryⁿ</a> <a id="3123" class="Symbol">λ</a> <a id="3125" href="Relation.Binary.Reflection.html#3125" class="Bound">ρ</a> <a id="3127" class="Symbol">→</a>
                 <a id="3146" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="3148" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="3154" class="Symbol">(</a><a id="3155" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="3161" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3163" href="Relation.Binary.Reflection.html#3059" class="Bound">f</a><a id="3164" class="Symbol">)</a> <a id="3166" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="3169" href="Relation.Binary.Reflection.html#3125" class="Bound">ρ</a> <a id="3171" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3173" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⟦</a> <a id="3175" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3181" class="Symbol">(</a><a id="3182" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="3188" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3190" href="Relation.Binary.Reflection.html#3059" class="Bound">f</a><a id="3191" class="Symbol">)</a> <a id="3193" href="Relation.Binary.Reflection.html#1350" class="Bound Operator">⇓⟧</a> <a id="3196" href="Relation.Binary.Reflection.html#3125" class="Bound">ρ</a> <a id="3198" class="Symbol">→</a>
                 <a id="3217" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="3219" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="3225" class="Symbol">(</a><a id="3226" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="3232" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3234" href="Relation.Binary.Reflection.html#3059" class="Bound">f</a><a id="3235" class="Symbol">)</a>  <a id="3238" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="3240" href="Relation.Binary.Reflection.html#3125" class="Bound">ρ</a> <a id="3242" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3244" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟦</a> <a id="3246" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3252" class="Symbol">(</a><a id="3253" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="3259" href="Relation.Binary.Reflection.html#3056" class="Bound">n</a> <a id="3261" href="Relation.Binary.Reflection.html#3059" class="Bound">f</a><a id="3262" class="Symbol">)</a>  <a id="3265" href="Relation.Binary.Reflection.html#1346" class="Bound Operator">⟧</a> <a id="3267" href="Relation.Binary.Reflection.html#3125" class="Bound">ρ</a><a id="3268" class="Symbol">)</a>
<a id="3270" href="Relation.Binary.Reflection.html#3045" class="Function">solve₁</a> <a id="3277" href="Relation.Binary.Reflection.html#3277" class="Bound">n</a> <a id="3279" href="Relation.Binary.Reflection.html#3279" class="Bound">f</a> <a id="3281" class="Symbol">=</a>
  <a id="3285" href="Function.Equivalence.html#1000" class="Field">Equivalence.from</a> <a id="3302" class="Symbol">(</a><a id="3303" href="Data.Vec.N-ary.html#3030" class="Function">uncurry-∀ⁿ</a> <a id="3314" href="Relation.Binary.Reflection.html#3277" class="Bound">n</a><a id="3315" class="Symbol">)</a> <a id="3317" href="Function.Equality.html#1064" class="Field Operator">⟨$⟩</a> <a id="3321" class="Symbol">λ</a> <a id="3323" href="Relation.Binary.Reflection.html#3323" class="Bound">ρ</a> <a id="3325" class="Symbol">→</a>
    <a id="3331" href="Relation.Binary.PropositionalEquality.Core.html#1823" class="Function">P.subst</a> <a id="3339" href="Function.Base.html#615" class="Function">id</a> <a id="3342" class="Symbol">(</a><a id="3343" href="Relation.Binary.PropositionalEquality.Core.html#1727" class="Function">P.sym</a> <a id="3349" class="Symbol">(</a><a id="3350" href="Data.Vec.N-ary.html#2631" class="Function">left-inverse</a> <a id="3363" class="Symbol">(λ</a> <a id="3366" href="Relation.Binary.Reflection.html#3366" class="Bound">_</a> <a id="3368" class="Symbol">→</a> <a id="3370" class="Symbol">_</a> <a id="3372" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3374" class="Symbol">_</a> <a id="3376" class="Symbol">→</a> <a id="3378" class="Symbol">_</a> <a id="3380" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3382" class="Symbol">_)</a> <a id="3385" href="Relation.Binary.Reflection.html#3323" class="Bound">ρ</a><a id="3386" class="Symbol">))</a>
      <a id="3395" class="Symbol">(</a><a id="3396" href="Relation.Binary.Reflection.html#1757" class="Function">prove</a> <a id="3402" href="Relation.Binary.Reflection.html#3323" class="Bound">ρ</a> <a id="3404" class="Symbol">(</a><a id="3405" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="3411" class="Symbol">(</a><a id="3412" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="3418" href="Relation.Binary.Reflection.html#3277" class="Bound">n</a> <a id="3420" href="Relation.Binary.Reflection.html#3279" class="Bound">f</a><a id="3421" class="Symbol">))</a> <a id="3424" class="Symbol">(</a><a id="3425" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="3431" class="Symbol">(</a><a id="3432" href="Relation.Binary.Reflection.html#2037" class="Function">close</a> <a id="3438" href="Relation.Binary.Reflection.html#3277" class="Bound">n</a> <a id="3440" href="Relation.Binary.Reflection.html#3279" class="Bound">f</a><a id="3441" class="Symbol">)))</a>

<a id="3446" class="Comment">-- A variant of _,_ which is intended to make uses of solve and solve₁</a>
<a id="3517" class="Comment">-- look a bit nicer.</a>

<a id="3539" class="Keyword">infix</a> <a id="3545" class="Number">4</a> <a id="3547" href="Relation.Binary.Reflection.html#3552" class="Function Operator">_⊜_</a>

<a id="_⊜_"></a><a id="3552" href="Relation.Binary.Reflection.html#3552" class="Function Operator">_⊜_</a> <a id="3556" class="Symbol">:</a> <a id="3558" class="Symbol">∀</a> <a id="3560" class="Symbol">{</a><a id="3561" href="Relation.Binary.Reflection.html#3561" class="Bound">n</a><a id="3562" class="Symbol">}</a> <a id="3564" class="Symbol">→</a> <a id="3566" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="3571" href="Relation.Binary.Reflection.html#3561" class="Bound">n</a> <a id="3573" class="Symbol">→</a> <a id="3575" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="3580" href="Relation.Binary.Reflection.html#3561" class="Bound">n</a> <a id="3582" class="Symbol">→</a> <a id="3584" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="3589" href="Relation.Binary.Reflection.html#3561" class="Bound">n</a> <a id="3591" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3593" href="Relation.Binary.Reflection.html#1238" class="Bound">Expr</a> <a id="3598" href="Relation.Binary.Reflection.html#3561" class="Bound">n</a>
<a id="3600" href="Relation.Binary.Reflection.html#3552" class="Function Operator">_⊜_</a> <a id="3604" class="Symbol">=</a> <a id="3606" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a>
</pre></body></html>